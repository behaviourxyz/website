!function(e){var t={};function i(n){if(t[n])return t[n].exports;var o=t[n]={i:n,l:!1,exports:{}};return e[n].call(o.exports,o,o.exports,i),o.l=!0,o.exports}i.m=e,i.c=t,i.d=function(e,t,n){i.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:n})},i.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="",i(i.s=0)}([function(e,t,i){"use strict";i.r(t);i(1);var n=Marionette.View.extend({tagName:"div",className:"swiper-slide",template:_.template('<%= showContent() %><div class="lightbox-caption lay-textformat-parent"><%= showCaption() %></div>'),templateContext:function(){var e=this.model;return{showContent:function(){return e.get("image_markup")},showCaption:function(){if(e.get("lightbox_caption"))return e.get("lightbox_caption")}}},onRender:function(){var e=this.model.get("lightbox_caption");void 0!==e&&""!=e.trim()?this.$el.addClass("has-caption"):this.$el.addClass("no-caption")}}),o=Marionette.CollectionView.extend({tagName:"div",template:"#lightbox-slider",className:"swiper-wrapper",childView:n}),a=parseInt(layLightboxPassedData.breakpoint,10),r=parseInt(layLightboxPassedData.spaceAround,10),s=parseInt(layLightboxPassedData.spaceBelow,10),l=parseInt(layLightboxPassedData.space_between_image_and_caption,10),u={getSlider:function(e){return L(e)},init:function(){I()},update:function(){C()},positionSlider:function(){g()},sizeImages:function(){f()},bindResize:function(){m()},disable:function(){M()},enable:function(){k()},bindImagesOnPageClick:function(){j()}},d={iScroll:null,ix:0,slidesAmt:0,browserInnerWidth:0,timeoutLR:null,timeoutRL:null,slidePrevNextHandler:null,pageType:null,magneticSlidesActive:!1,isOneImage:!1,isActivated:!0,screenSize:window.innerWidth<=a?"phone":"desktop",isDoingZoomingAnimation:!1,swiper:null},c={$htmlBody:null,$body:null,$lightboxInner:null},h={slideDuration:layLightboxPassedData.slidingDuration,scrollToAnimationDuration:600,minimalStyle:!1,onlyDrag:!1},g=function(){},f=function(){var e=jQuery("body").innerWidth(),t=(window.innerHeight-s)/e,i=window.innerHeight/e;jQuery("#lightbox-region .swiper-slide").each(function(n){var o,a,l=jQuery(this).find("img"),u=l.attr("data-ar");jQuery(this).hasClass("has-caption")?u>t?(a=(o=window.innerHeight-r-s)/u,l.css({width:a,height:o,top:r,left:"50%",transform:"translate(-50%,0)","webkit-transform":"translate(-50%,0)"}),l.attr("sizes",a+"px")):(o=(e-2*r)*u,a=e-2*r,l.css({width:a,height:o,top:"50%",left:"50%",transform:"translate(-50%,-50%)","webkit-transform":"translate(-50%,-50%)"}),l.attr("sizes",a+"px")):(u>i?a=(o=window.innerHeight-2*r)/u:(o=(e-2*r)*u,a=e-2*r),l.css({width:a,height:o,top:"50%",left:"50%",transform:"translate(-50%,-50%)","webkit-transform":"translate(-50%,-50%)"}),l.attr("sizes",a+"px"))})},p=function(){var e=(window.innerHeight-s)/jQuery("body").innerWidth();jQuery("#lightbox-region .swiper-slide.has-caption").each(function(t){var i=jQuery(this).find("img"),n=i[0].getBoundingClientRect(),o=i.position().left,a=0,u=i.attr("data-ar");if(u<e){var d=(jQuery("body").innerWidth()-2*r)*u;a=(window.innerHeight-d)/2>s?d+(window.innerHeight-d)/2:window.innerHeight-s}else{a=(d=window.innerHeight-r-s)+r}a+=l,jQuery(this).find(".lightbox-caption").css({width:n.width+"px",left:o+"px",top:a+"px"})})},y=d.screenSize,m=function(){jQuery(window).on("resize",function(){d.browserInnerWidth=jQuery("body").innerWidth(),g(),f(),p(),y=d.screenSize,d.screenSize=window.innerWidth<=a?"phone":"desktop",d.screenSize!=y&&D()}),jQuery(window).on("resize",_.debounce(function(){b()},300))},b=function(){jQuery("#lightbox-region .swiper-slide").each(function(){var e=jQuery(this).find("img"),t=e.width();e.attr("sizes",t+"px")})},x=_.throttle(function(){var e=B(),t=e.find('.col[data-type="img"], .col[data-type="stack"], .col[data-type="elementgrid"]').find(".img:not(.lightboxoff) img").eq(d.ix);if(d.magneticSlidesActive&&jQuery("html").hasClass("fp-enabled")){var i=t.parents(".row"),n=0;e.find(".row").each(function(e){jQuery(this).is(i)&&(n=e)}),e.hasClass("horizontal-fullpage")?jQuery.fn.fullpage.moveTo(1,n):(n++,jQuery.fn.fullpage.moveTo(n,0))}else{var o=t.offset().top;o-=(window.innerHeight-t.height())/2,c.$htmlBody.animate({scrollTop:o},h.scrollToAnimationDuration,"easeInOutQuad",function(){c.$htmlBody.off("scroll mousedown wheel DOMMouseScroll mousewheel touchmove")}),c.$htmlBody.on("scroll mousedown wheel DOMMouseScroll mousewheel touchmove",function(){c.$htmlBody.stop()})}},h.scrollToAnimationDuration),w=function(){jQuery("#lightbox-region").addClass("hide hide-images transparent")},v=function(e){if(!d.isDoingZoomingAnimation){d.isDoingZoomingAnimation=!0,void 0!==e&&e.stopPropagation();var t=jQuery("#lightbox-region .swiper-slide img").eq(d.ix),i=t[0].getBoundingClientRect(),n=t.clone();jQuery("body").append(n),n.css({position:"fixed",top:i.top+"px",left:i.left+"px",width:i.width+"px",height:i.height+"px",opacity:1,transform:"","-webkit-transform":""}).addClass("lightbox-zooming-out");var o=B().find('.col[data-type="img"] .img:not(.lightboxoff) img, .col[data-type="elementgrid"] .img:not(.lightboxoff) img').eq(d.ix)[0].getBoundingClientRect();setTimeout(function(){window.lay_lightbox_opened=!1,n.css({top:o.top+"px",left:o.left+"px",width:o.width+"px",height:o.height+"px",opacity:0}),jQuery("#lightbox-region").addClass("hide-images transparent"),setTimeout(function(){jQuery(".lightbox-zooming-out").remove(),jQuery("#lightbox-region").addClass("hide"),d.isDoingZoomingAnimation=!1},300)},100)}},Q=function(){jQuery("#lightbox-region #lightbox-inner img").each(function(){jQuery(this).addClass("lazyload"),lazySizes.loader.unveil(this)})},j=function(){B().find('.col[data-type="img"] .img:not(.lightboxoff) img, .col[data-type="elementgrid"] .img:not(.lightboxoff) img').on("click",function(e){if(!jQuery(this.parentNode).is("a")&&!jQuery(this.parentNode.parentNode).is("a")){e.stopPropagation();var t=jQuery("body");if(d.isDoingZoomingAnimation)return;if(d.isDoingZoomingAnimation=!0,d.isActivated&&null!=d.swiper&&("on"==layLightboxPassedData.activeOnPhone||window.innerWidth>a)){var i=this.getBoundingClientRect(),n=jQuery(this).clone();t.append(n),n.css({position:"fixed",top:i.top+"px",left:i.left+"px",width:i.width+"px",height:i.height+"px",opacity:0}).addClass("lightbox-zooming-in");var o=B().find('.col[data-type="img"] .img:not(.lightboxoff) img, .col[data-type="elementgrid"] .img:not(.lightboxoff) img'),r=jQuery(this);o.each(function(e){jQuery(this).is(r)&&(d.ix=e)}),d.swiper.slideTo(d.ix,0,!1);var s=jQuery("#lightbox-region .swiper-slide img").eq(d.ix);setTimeout(function(){window.lay_lightbox_opened=!0,p();var e=s[0].getBoundingClientRect();n.css({top:e.top+window.innerHeight+"px",left:e.left+"px",width:e.width+"px",height:e.height+"px",opacity:1}),jQuery("#lightbox-region").removeClass("hide transparent"),setTimeout(function(){jQuery("#lightbox-region").removeClass("hide-images");var e=s[0];e.complete?(setTimeout(function(){n.remove()},200),Q()):e.onload=function(){setTimeout(function(){n.remove()},200),Q()},d.isDoingZoomingAnimation=!1,function(e){e.addClass("lazyload")}(s)},300)},0)}}})},I=function(){var e,t;"on"==layLightboxPassedData.minimalStyle&&(h.minimalStyle=!0),"on"==layLightboxPassedData.onlyDrag&&(h.onlyDrag=!0),c.$htmlBody=jQuery("html, body"),c.$body=jQuery("body"),c.$lightboxInner=jQuery("#lightbox-inner"),d.browserInnerWidth=c.$body.innerWidth(),m(),"on"==layLightboxPassedData.onlyZoom?(jQuery(".close-lightbox").off("click",v),jQuery(".close-lightbox").on("click",v)):jQuery(document).keydown(function(e){if(!jQuery("#lightbox-region").hasClass("hide"))switch(e.which){case 37:d.slidePrevNextHandler.slidePrev();break;case 39:d.slidePrevNextHandler.slideNext();break;case 27:v(e)}}),e=null,t=function(t){e!=t.clientX&&jQuery(t.data).addClass("mousedown")},c.$lightboxInner.on("mousedown",function(i){e=i.clientX,jQuery(this).on("mousemove",this,t)}).on("mouseup",function(){jQuery(this).removeClass("mousedown"),jQuery(this).off("mousemove",t)}),P()},P=function(){jQuery("#lightbox-region").on("swipeup",function(){v()}),jQuery("#lightbox-region").on("swipedown",function(){v()})},C=function(){var e;d.pageType=c.$body.attr("data-type"),d.magneticSlidesActive=!1,"undefined"!=typeof magneticSlides&&(d.magneticSlidesActive=magneticSlides.isActiveHere()),d.slidesAmt=jQuery("#lightbox-region .swiper-slide").length,0!=d.slidesAmt&&(1==d.slidesAmt?(c.$lightboxInner.addClass("oneimage"),d.isOneImage=!0):(c.$lightboxInner.removeClass("oneimage"),d.isOneImage=!1),g(),f(),p(),function(){d.swiper&&d.swiper.destroy();var e=parseInt(h.slideDuration,10);jQuery("html").hasClass("phone-size")&&(e=300);var t="on"==layLightboxPassedData.onlyDrag;d.swiper=new Swiper("#lightbox-inner .swiper-container",{speed:e,simulateTouch:t,keyboard:{enabled:!1,onlyInViewport:!1}}),d.swiper.on("slideChange",function(){d.ix=d.swiper.realIndex,x()})}(),h.onlyDrag&&(jQuery(d.swiper.el).off("click",v),jQuery(d.swiper.el).on("click",v)),"on"!=layLightboxPassedData.onlyZoom&&(d.slidePrevNextHandler=new function(){var e=this;this.bindTap=function(){jQuery("body").hasClass("no-touchdevice")&&("on"==layLightboxPassedData.minimalStyle?jQuery(d.swiper.el).find("img").on("click",function(t){e.onClickInner(t)}):(jQuery(d.swiper.el).off("click"),jQuery(d.swiper.el).on("click",function(t){e.onClickInner(t)})))},this.onClickInner=function(t){t.stopPropagation(),c.$lightboxInner.hasClass("cursor-left")?e.slidePrev():c.$lightboxInner.hasClass("cursor-right")&&e.slideNext()},this.slideNext=function(){d.ix<d.slidesAmt-1?(d.ix++,d.swiper.slideNext(),x()):d.isOneImage||e.bounceLeftRight()},this.bounceLeftRight=function(){c.$lightboxInner.addClass("bounceleftright"),clearTimeout(d.timeoutLR),d.timeoutLR=setTimeout(function(){c.$lightboxInner.removeClass("bounceleftright")},600)},this.slidePrev=function(){d.ix>0?(d.ix--,d.swiper.slidePrev(),x()):d.isOneImage||e.bounceRightLeft()},this.bounceRightLeft=function(){c.$lightboxInner.addClass("bouncerightleft"),clearTimeout(d.timeoutRL),d.timeoutRL=setTimeout(function(){c.$lightboxInner.removeClass("bouncerightleft")},600)},this.bindMouseMove=function(){c.$lightboxInner.off("mousemove"),c.$lightboxInner.on("mousemove",function(e){e.pageX>=d.browserInnerWidth/2?c.$lightboxInner.addClass("cursor-right").removeClass("cursor-left"):e.pageX<=d.browserInnerWidth/2&&c.$lightboxInner.addClass("cursor-left").removeClass("cursor-right")})}},h.onlyDrag||(d.slidePrevNextHandler.bindMouseMove(),d.slidePrevNextHandler.bindTap())),"on"==layLightboxPassedData.onlyZoom&&(jQuery(document).keydown(function(e){if(!jQuery("#lightbox-region").hasClass("hide"))switch(e.which){case 27:v(e)}}),jQuery(d.swiper.el).off("click",v),jQuery(d.swiper.el).on("click",v)),"on"!=layLightboxPassedData.onlyZoom&&((e=jQuery(".close-lightbox")).off("click",v),h.minimalStyle?((e=jQuery("#lightbox-region")).on("click",v),c.$lightboxInner.find("img").on("click",function(e){e.stopPropagation()})):e.on("click",v)))},D=function(){"on"==layLightboxPassedData.activeOnPhone?d.isActivated?jQuery("body").addClass("lightbox-css-on").removeClass("lightbox-css-off"):jQuery("body").removeClass("lightbox-css-on").addClass("lightbox-css-off"):window.innerWidth>a&&d.isActivated?jQuery("body").addClass("lightbox-css-on").removeClass("lightbox-css-off"):jQuery("body").removeClass("lightbox-css-on").addClass("lightbox-css-off")},M=function(){w(),d.isActivated=!1,c.$body.removeClass("lightbox-active"),jQuery("#lightbox-region #lightbox-inner .swiper-container").html(""),D()},k=function(){w(),d.isDoingZoomingAnimation=!1,d.isActivated=!0,c.$body.addClass("lightbox-active"),D()},L=function(e){return new o({collection:e})},O={updateSlider:function(){A()}},$={$lightboxRegion:null},A=function(){$.$lightboxRegion=jQuery("#lightbox-inner .swiper-container"),function(){$.$lightboxRegion.html("");var e=new Backbone.Collection;B().find('.col[data-type="img"], .col[data-type="stack"], .col[data-type="elementgrid"]').find(".img:not(.lightboxoff) img").each(function(){var t=jQuery(this.parentNode).attr("data-lightbox-caption"),i=this.outerHTML,n=new Backbone.Model({image_markup:i,lightbox_caption:t});e.push(n)});var t=u.getSlider(e);t.render(),$.$lightboxRegion.html(t.el),u.bindImagesOnPageClick()}(),u.update()};i.d(t,"getDesktopOrPhoneTarget",function(){return B});var S=null;jQuery(document).ready(function(){u.init()}),window.laytheme.on("content_ready",function(e){if(layLightboxIsActiveHere()&&("desktop"==e||T(e))){switch(e){case"desktop":S=jQuery("#grid, .cover-region-desktop");break;case"phone":0==(S=jQuery("#custom-phone-grid")).length&&(S=jQuery("#grid, .cover-region-desktop"))}u.enable(),O.updateSlider()}else u.disable()}),window.layLightboxIsActiveHere=function(){var e=jQuery("body"),t=parseInt(e.attr("data-id"),10),i=!1;if("project"==e.attr("data-type")){if("on"==layLightboxPassedData.activeInProjects||"all"==layLightboxPassedData.activeInProjects)i=!0;else if("individual"==layLightboxPassedData.activeInProjects&&""!=layLightboxPassedData.individualProjectIds){var n=JSON.parse(layLightboxPassedData.individualProjectIds);jQuery.inArray(t,n)>-1&&(i=!0)}}else if("page"==e.attr("data-type")){if("on"==layLightboxPassedData.activeInPages||"all"==layLightboxPassedData.activeInPages)i=!0;else if("individual"==layLightboxPassedData.activeInPages&&""!=layLightboxPassedData.individualPageIds){n=JSON.parse(layLightboxPassedData.individualPageIds);jQuery.inArray(t,n)>-1&&(i=!0)}}else if("category"==e.attr("data-type"))if("on"==layLightboxPassedData.activeInCategories||"all"==layLightboxPassedData.activeInCategories)i=!0;else if("individual"==layLightboxPassedData.activeInCategories&&""!=layLightboxPassedData.individualCategoryIds){n=JSON.parse(layLightboxPassedData.individualCategoryIds);jQuery.inArray(t,n)>-1&&(i=!0)}return i};var T=function(e){return"phone"==e&&"on"==layLightboxPassedData.activeOnPhone},B=function(){return S}},function(e,t){jQuery.easing.jswing=jQuery.easing.swing,jQuery.extend(jQuery.easing,{def:"easeOutQuad",swing:function(e,t,i,n,o){return jQuery.easing[jQuery.easing.def](e,t,i,n,o)},easeInQuad:function(e,t,i,n,o){return n*(t/=o)*t+i},easeOutQuad:function(e,t,i,n,o){return-n*(t/=o)*(t-2)+i},easeInOutQuad:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t+i:-n/2*(--t*(t-2)-1)+i},easeInCubic:function(e,t,i,n,o){return n*(t/=o)*t*t+i},easeOutCubic:function(e,t,i,n,o){return n*((t=t/o-1)*t*t+1)+i},easeInOutCubic:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t+i:n/2*((t-=2)*t*t+2)+i},easeInQuart:function(e,t,i,n,o){return n*(t/=o)*t*t*t+i},easeOutQuart:function(e,t,i,n,o){return-n*((t=t/o-1)*t*t*t-1)+i},easeInOutQuart:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t*t+i:-n/2*((t-=2)*t*t*t-2)+i},easeInQuint:function(e,t,i,n,o){return n*(t/=o)*t*t*t*t+i},easeOutQuint:function(e,t,i,n,o){return n*((t=t/o-1)*t*t*t*t+1)+i},easeInOutQuint:function(e,t,i,n,o){return(t/=o/2)<1?n/2*t*t*t*t*t+i:n/2*((t-=2)*t*t*t*t+2)+i},easeInSine:function(e,t,i,n,o){return-n*Math.cos(t/o*(Math.PI/2))+n+i},easeOutSine:function(e,t,i,n,o){return n*Math.sin(t/o*(Math.PI/2))+i},easeInOutSine:function(e,t,i,n,o){return-n/2*(Math.cos(Math.PI*t/o)-1)+i},easeInExpo:function(e,t,i,n,o){return 0==t?i:n*Math.pow(2,10*(t/o-1))+i},easeOutExpo:function(e,t,i,n,o){return t==o?i+n:n*(1-Math.pow(2,-10*t/o))+i},easeInOutExpo:function(e,t,i,n,o){return 0==t?i:t==o?i+n:(t/=o/2)<1?n/2*Math.pow(2,10*(t-1))+i:n/2*(2-Math.pow(2,-10*--t))+i},easeInCirc:function(e,t,i,n,o){return-n*(Math.sqrt(1-(t/=o)*t)-1)+i},easeOutCirc:function(e,t,i,n,o){return n*Math.sqrt(1-(t=t/o-1)*t)+i},easeInOutCirc:function(e,t,i,n,o){return(t/=o/2)<1?-n/2*(Math.sqrt(1-t*t)-1)+i:n/2*(Math.sqrt(1-(t-=2)*t)+1)+i},easeInElastic:function(e,t,i,n,o){var a=1.70158,r=0,s=n;if(0==t)return i;if(1==(t/=o))return i+n;if(r||(r=.3*o),s<Math.abs(n)){s=n;a=r/4}else a=r/(2*Math.PI)*Math.asin(n/s);return-s*Math.pow(2,10*(t-=1))*Math.sin((t*o-a)*(2*Math.PI)/r)+i},easeOutElastic:function(e,t,i,n,o){var a=1.70158,r=0,s=n;if(0==t)return i;if(1==(t/=o))return i+n;if(r||(r=.3*o),s<Math.abs(n)){s=n;a=r/4}else a=r/(2*Math.PI)*Math.asin(n/s);return s*Math.pow(2,-10*t)*Math.sin((t*o-a)*(2*Math.PI)/r)+n+i},easeInOutElastic:function(e,t,i,n,o){var a=1.70158,r=0,s=n;if(0==t)return i;if(2==(t/=o/2))return i+n;if(r||(r=o*(.3*1.5)),s<Math.abs(n)){s=n;a=r/4}else a=r/(2*Math.PI)*Math.asin(n/s);return t<1?s*Math.pow(2,10*(t-=1))*Math.sin((t*o-a)*(2*Math.PI)/r)*-.5+i:s*Math.pow(2,-10*(t-=1))*Math.sin((t*o-a)*(2*Math.PI)/r)*.5+n+i},easeInBack:function(e,t,i,n,o,a){return void 0==a&&(a=1.70158),n*(t/=o)*t*((a+1)*t-a)+i},easeOutBack:function(e,t,i,n,o,a){return void 0==a&&(a=1.70158),n*((t=t/o-1)*t*((a+1)*t+a)+1)+i},easeInOutBack:function(e,t,i,n,o,a){return void 0==a&&(a=1.70158),(t/=o/2)<1?n/2*(t*t*((1+(a*=1.525))*t-a))+i:n/2*((t-=2)*t*((1+(a*=1.525))*t+a)+2)+i},easeInBounce:function(e,t,i,n,o){return n-jQuery.easing.easeOutBounce(e,o-t,0,n,o)+i},easeOutBounce:function(e,t,i,n,o){return(t/=o)<1/2.75?n*(7.5625*t*t)+i:t<2/2.75?n*(7.5625*(t-=1.5/2.75)*t+.75)+i:t<2.5/2.75?n*(7.5625*(t-=2.25/2.75)*t+.9375)+i:n*(7.5625*(t-=2.625/2.75)*t+.984375)+i},easeInOutBounce:function(e,t,i,n,o){return t<o/2?.5*jQuery.easing.easeInBounce(e,2*t,0,n,o)+i:.5*jQuery.easing.easeOutBounce(e,2*t-o,0,n,o)+.5*n+i}})}]);