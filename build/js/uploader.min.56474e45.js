!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self).FilePondPluginFileValidateSize=b()}(this,function(){"use strict";var a=function(a){var b=a.addFilter,c=a.utils,d=c.Type,e=c.replaceInString,f=c.toNaturalFileSize;return b("ALLOW_HOPPER_ITEM",function(a,b){var c=b.query;if(!c("GET_ALLOW_FILE_SIZE_VALIDATION"))return!0;var d=c("GET_MAX_FILE_SIZE");if(null!==d&&a.size>=d)return!1;var e=c("GET_MIN_FILE_SIZE");return!(null!==e&&a.size<=e)}),b("LOAD_FILE",function(a,b){var c=b.query;return new Promise(function(b,d){if(!c("GET_ALLOW_FILE_SIZE_VALIDATION"))return b(a);var g=c("GET_FILE_VALIDATE_SIZE_FILTER");if(g&&!g(a))return b(a);var h=c("GET_MAX_FILE_SIZE");if(null!==h&&a.size>=h)d({status:{main:c("GET_LABEL_MAX_FILE_SIZE_EXCEEDED"),sub:e(c("GET_LABEL_MAX_FILE_SIZE"),{filesize:f(h)})}});else{var i=c("GET_MIN_FILE_SIZE");if(null!==i&&a.size<=i)d({status:{main:c("GET_LABEL_MIN_FILE_SIZE_EXCEEDED"),sub:e(c("GET_LABEL_MIN_FILE_SIZE"),{filesize:f(i)})}});else{var j=c("GET_MAX_TOTAL_FILE_SIZE");if(null!==j&&c("GET_ACTIVE_ITEMS").reduce(function(a,b){return a+b.fileSize},0)>j)return void d({status:{main:c("GET_LABEL_MAX_TOTAL_FILE_SIZE_EXCEEDED"),sub:e(c("GET_LABEL_MAX_TOTAL_FILE_SIZE"),{filesize:f(j)})}});b(a)}}})}),{options:{allowFileSizeValidation:[!0,d.BOOLEAN],maxFileSize:[null,d.INT],minFileSize:[null,d.INT],maxTotalFileSize:[null,d.INT],fileValidateSizeFilter:[null,d.FUNCTION],labelMinFileSizeExceeded:["File is too small",d.STRING],labelMinFileSize:["Minimum file size is {filesize}",d.STRING],labelMaxFileSizeExceeded:["File is too large",d.STRING],labelMaxFileSize:["Maximum file size is {filesize}",d.STRING],labelMaxTotalFileSizeExceeded:["Maximum total size exceeded",d.STRING],labelMaxTotalFileSize:["Maximum total file size is {filesize}",d.STRING]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:a})),a}),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?module.exports=b():"function"==typeof define&&define.amd?define(b):(a=a||self).FilePondPluginFileValidateType=b()}(this,function(){"use strict";var a=function(a){var b=a.addFilter,c=a.utils,d=c.Type,e=c.isString,f=c.replaceInString,g=c.guesstimateMimeType,h=c.getExtensionFromFilename,i=c.getFilenameFromURL,j=function(a,b){return a.some(function(a){return/\*$/.test(a)?(c=a,(/^[^\/]+/.exec(b)||[]).pop()===c.slice(0,-2)):a===b;var c})},k=function(a,b,c){if(0===b.length)return!0;var d=function(a){var b="";if(e(a)){var c=i(a),d=h(c);d&&(b=g(d))}else b=a.type;return b}(a);return c?new Promise(function(e,f){c(a,d).then(function(a){j(b,a)?e():f()})["catch"](f)}):j(b,d)};return b("SET_ATTRIBUTE_TO_OPTION_MAP",function(a){return Object.assign(a,{accept:"acceptedFileTypes"})}),b("ALLOW_HOPPER_ITEM",function(a,b){var c=b.query;return!c("GET_ALLOW_FILE_TYPE_VALIDATION")||k(a,c("GET_ACCEPTED_FILE_TYPES"))}),b("LOAD_FILE",function(a,b){var c=b.query;return new Promise(function(b,d){if(c("GET_ALLOW_FILE_TYPE_VALIDATION")){var e=c("GET_ACCEPTED_FILE_TYPES"),g=c("GET_FILE_VALIDATE_TYPE_DETECT_TYPE"),h=k(a,e,g),i=function(){var a,b=e.map((a=c("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES_MAP"),function(b){return null!==a[b]&&(a[b]||b)})).filter(function(a){return!1!==a});d({status:{main:c("GET_LABEL_FILE_TYPE_NOT_ALLOWED"),sub:f(c("GET_FILE_VALIDATE_TYPE_LABEL_EXPECTED_TYPES"),{allTypes:b.join(", "),allButLastType:b.slice(0,-1).join(", "),lastType:b[b.length-1]})}})};if("boolean"==typeof h)return h?b(a):i();h.then(function(){b(a)})["catch"](i)}else b(a)})}),{options:{allowFileTypeValidation:[!0,d.BOOLEAN],acceptedFileTypes:[[],d.ARRAY],labelFileTypeNotAllowed:["File is of invalid type",d.STRING],fileValidateTypeLabelExpectedTypes:["Expects {allButLastType} or {lastType}",d.STRING],fileValidateTypeLabelExpectedTypesMap:[{},d.OBJECT],fileValidateTypeDetectType:[null,d.FUNCTION]}}};return"undefined"!=typeof window&&void 0!==window.document&&document.dispatchEvent(new CustomEvent("FilePond:pluginloaded",{detail:a})),a}),!function(a,b){"object"==typeof exports&&"undefined"!=typeof module?b(exports):"function"==typeof define&&define.amd?define(["exports"],b):b((a=a||self).FilePond={})}(this,function(a){"use strict";function b(a){this.wrapped=a}function c(a){function c(a,e){try{var f=i[a](e),g=f.value,h=g instanceof b;Promise.resolve(h?g.wrapped:g).then(function(a){h?c("next",a):d(f.done?"return":"normal",a)},function(a){c("throw",a)})}catch(i){d("throw",i)}}function d(a,b){switch(a){case"return":e.resolve({value:b,done:!0});break;case"throw":e.reject(b);break;default:e.resolve({value:b,done:!1})}(e=e.next)?c(e.key,e.arg):f=null}var e,f;this._invoke=function(a,b){return new Promise(function(d,g){var h={key:a,arg:b,resolve:d,reject:g,next:null};f?f=f.next=h:(e=f=h,c(a,b))})},"function"!=typeof a["return"]&&(this["return"]=void 0)}function d(a){return function(a){if(Array.isArray(a)){for(var b=0,c=new Array(a.length);b<a.length;b++)c[b]=a[b];return c}}(a)||e(a)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function e(a){if(Symbol.iterator in Object(a)||"[object Arguments]"===Object.prototype.toString.call(a))return Array.from(a)}var f,g,h=function(a,b){for(var c in a)a.hasOwnProperty(c)&&b(c,a[c])},i=function(a){var b={};return h(a,function(c){!function(a,b,c){"function"!=typeof c?Object.defineProperty(a,b,Object.assign({},c)):a[b]=c}(b,c,a[c])}),b},j=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null;return null===c?a.getAttribute(b)||a.hasAttribute(b):void a.setAttribute(b,c)},k=["svg","path"],l=function(a){return k.includes(a)},m=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};"object"==typeof b&&(c=b,b=null);var d=l(a)?document.createElementNS("http://www.w3.org/2000/svg",a):document.createElement(a);return b&&(l(a)?j(d,"class",b):d.className=b),h(c,function(a,b){j(d,a,b)}),d},n=function(a,b){return function(a,c){return void 0!==c?b.splice(c,0,a):b.push(a),a}},o=function(a,b){return function(c){return b.splice(b.indexOf(c),1),c.element.parentNode&&a.removeChild(c.element),c}},p="undefined"!=typeof window&&void 0!==window.document,q=function(){return p},r="children"in(q()?m("svg"):{})?function(a){return a.children.length}:function(a){return a.childNodes.length},s=function(a,b,c,d){var e=c[0]||a.left,f=c[1]||a.top,g=e+a.width,h=f+a.height*(d[1]||1),i={element:Object.assign({},a),inner:{left:a.left,top:a.top,right:a.right,bottom:a.bottom},outer:{left:e,top:f,right:g,bottom:h}};return b.filter(function(a){return!a.isRectIgnored()}).map(function(a){return a.rect}).forEach(function(a){t(i.inner,Object.assign({},a.inner)),t(i.outer,Object.assign({},a.outer))}),u(i.inner),i.outer.bottom+=i.element.marginBottom,i.outer.right+=i.element.marginRight,u(i.outer),i},t=function(a,b){b.top+=a.top,b.right+=a.left,b.bottom+=a.top,b.left+=a.left,b.bottom>a.bottom&&(a.bottom=b.bottom),b.right>a.right&&(a.right=b.right)},u=function(a){a.width=a.right-a.left,a.height=a.bottom-a.top},v=function(a){return"number"==typeof a},w=function(a){return a<.5?2*a*a:(4-2*a)*a-1},x={spring:function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.stiffness,c=void 0===b?.5:b,d=a.damping,e=void 0===d?.75:d,f=a.mass,g=void 0===f?10:f,h=null,j=null,k=0,l=!1,m=i({interpolate:function(){if(!l){if(!v(h)||!v(j))return l=!0,void(k=0);!function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.001;return Math.abs(a-b)<d&&Math.abs(c)<d}(j+=k+=-(j-h)*c/g,h,k*=e)?m.onupdate(j):(j=h,k=0,l=!0,m.onupdate(j),m.oncomplete(j))}},target:{set:function(a){return v(a)&&!v(j)&&(j=a),null===h&&(h=a,j=a),j===(h=a)||void 0===h?(l=!0,k=0,m.onupdate(j),void m.oncomplete(j)):void(l=!1)},get:function(){return h}},resting:{get:function(){return l}},onupdate:function(a){},oncomplete:function(a){}});return m},tween:function(){var a,b,c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=c.duration,e=void 0===d?500:d,f=c.easing,g=void 0===f?w:f,h=c.delay,j=void 0===h?0:h,k=null,l=!0,m=!1,n=null,o=i({interpolate:function(c){l||null===n||(null===k&&(k=c),c-k<j||((a=c-k-j)<e?(b=a/e,o.onupdate((a>=0?g(m?1-b:b):0)*n)):(a=1,b=m?0:1,o.onupdate(b*n),o.oncomplete(b*n),l=!0)))},target:{get:function(){return m?0:n},set:function(a){return null===n?(n=a,o.onupdate(a),void o.oncomplete(a)):(a<n?(n=1,m=!0):(m=!1,n=a),l=!1,k=null,void 0)}},resting:{get:function(){return l}},onupdate:function(a){},oncomplete:function(a){}});return o}},y=function(a,b,c){var d=a[b]&&"object"==typeof a[b][c]?a[b][c]:a[b]||a,e="string"==typeof d?d:d.type,f="object"==typeof d?Object.assign({},d):{};return x[e]?x[e](f):null},z=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]&&arguments[3];(b=Array.isArray(b)?b:[b]).forEach(function(b){a.forEach(function(a){var e=a,f=function(){return c[a]},g=function(b){return c[a]=b};"object"==typeof a&&(e=a.key,f=a.getter||f,g=a.setter||g),b[e]&&!d||(b[e]={get:f,set:g})})})},A=function(a){return null!=a},B={opacity:1,scaleX:1,scaleY:1,translateX:0,translateY:0,rotateX:0,rotateY:0,rotateZ:0,originX:0,originY:0},C=function(a,b){if(Object.keys(a).length!==Object.keys(b).length)return!0;for(var c in b)if(b[c]!==a[c])return!0;return!1},D=function(a,b){var c=b.opacity,d=b.perspective,e=b.translateX,f=b.translateY,g=b.scaleX,h=b.scaleY,i=b.rotateX,j=b.rotateY,k=b.rotateZ,l=b.originX,m=b.originY,n=b.width,o=b.height,p="",q="";(A(l)||A(m))&&(q+="transform-origin: "+(l||0)+"px "+(m||0)+"px;"),A(d)&&(p+="perspective("+d+"px) "),(A(e)||A(f))&&(p+="translate3d("+(e||0)+"px, "+(f||0)+"px, 0) "),(A(g)||A(h))&&(p+="scale3d("+(A(g)?g:1)+", "+(A(h)?h:1)+", 1) "),A(k)&&(p+="rotateZ("+k+"rad) "),A(i)&&(p+="rotateX("+i+"rad) "),A(j)&&(p+="rotateY("+j+"rad) "),p.length&&(q+="transform:"+p+";"),A(c)&&(q+="opacity:"+c+";",0===c&&(q+="visibility:hidden;"),c<1&&(q+="pointer-events:none;")),A(o)&&(q+="height:"+o+"px;"),A(n)&&(q+="width:"+n+"px;");var r=a.elementCurrentStyle||"";q.length===r.length&&q===r||(a.style.cssText=q,a.elementCurrentStyle=q)},E={styles:function(a){var b=a.mixinConfig,c=a.viewProps,d=a.viewInternalAPI,e=a.viewExternalAPI,f=a.view,g=Object.assign({},c),h={};z(b,[d,e],c);var i=function(){return f.rect?s(f.rect,f.childViews,[c.translateX||0,c.translateY||0],[c.scaleX||0,c.scaleY||0]):null};return d.rect={get:i},e.rect={get:i},b.forEach(function(a){c[a]=void 0===g[a]?B[a]:g[a]}),{write:function(){if(C(h,c))return D(f.element,c),Object.assign(h,Object.assign({},c)),!0},destroy:function(){}}},listeners:function(a){a.mixinConfig,a.viewProps,a.viewInternalAPI;var b,c=a.viewExternalAPI,d=(a.viewState,a.view),e=[],f=(b=d.element,function(a,c){b.addEventListener(a,c)}),g=function(a){return function(b,c){a.removeEventListener(b,c)}}(d.element);return c.on=function(a,b){e.push({type:a,fn:b}),f(a,b)},c.off=function(a,b){e.splice(e.findIndex(function(c){return c.type===a&&c.fn===b}),1),g(a,b)},{write:function(){return!0},destroy:function(){e.forEach(function(a){g(a.type,a.fn)})}}},animations:function(a){var b=a.mixinConfig,c=a.viewProps,d=a.viewInternalAPI,e=a.viewExternalAPI,f=(a.viewState,Object.assign({},c)),g=[];return h(b,function(a,b){var h=y(b);h&&(h.onupdate=function(b){c[a]=b},h.target=f[a],z([{key:a,setter:function(a){h.target!==a&&(h.target=a)},getter:function(){return c[a]}}],[d,e],c,!0),g.push(h))}),{write:function(a){var b=!0;return g.forEach(function(c){c.resting||(b=!1),c.interpolate(a)}),b},destroy:function(){}}},apis:function(a){var b=a.mixinConfig,c=a.viewProps,d=a.viewExternalAPI;z(b,d,c)}},F=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};return b.layoutCalculated||(a.paddingTop=parseInt(c.paddingTop,10)||0,a.marginTop=parseInt(c.marginTop,10)||0,a.marginRight=parseInt(c.marginRight,10)||0,a.marginBottom=parseInt(c.marginBottom,10)||0,a.marginLeft=parseInt(c.marginLeft,10)||0,b.layoutCalculated=!0),a.left=b.offsetLeft||0,a.top=b.offsetTop||0,a.width=b.offsetWidth||0,a.height=b.offsetHeight||0,a.right=a.left+a.width,a.bottom=a.top+a.height,a.scrollTop=b.scrollTop,a.hidden=null===b.offsetParent,a},G=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=a.tag,c=void 0===b?"div":b,d=a.name,e=void 0===d?null:d,f=a.attributes,g=void 0===f?{}:f,h=a.read,j=void 0===h?function(){}:h,k=a.write,l=void 0===k?function(){}:k,p=a.create,q=void 0===p?function(){}:p,t=a.destroy,u=void 0===t?function(){}:t,v=a.filterFrameActionsForChild,w=void 0===v?function(a,b){return b}:v,x=a.didCreateView,y=void 0===x?function(){}:x,z=a.didWriteView,A=void 0===z?function(){}:z,B=a.ignoreRect,C=void 0!==B&&B,D=a.ignoreRectUpdate,G=void 0!==D&&D,H=a.mixins,I=void 0===H?[]:H;return function(a){var b,d=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},f=m(c,"filepond--"+e,g),h=window.getComputedStyle(f,null),k=F(),p=null,t=!1,v=[],x=[],z={},B={},D=[l],H=[j],J=[u],K=function(){return f},L=function(){return v.concat()},M=function(){return p||(p=s(k,v,[0,0],[1,1]))},N={element:{get:K},style:{get:function(){return h}},childViews:{get:L}},O=Object.assign({},N,{rect:{get:M},ref:{get:function(){return z}},is:function(a){return e===a},appendChild:(b=f,function(a,c){void 0!==c&&b.children[c]?b.insertBefore(a,b.children[c]):b.appendChild(a)}),createChildView:function(a){return function(b,c){return b(a,c)}}(a),linkView:function(a){return v.push(a),a},unlinkView:function(a){v.splice(v.indexOf(a),1)},appendChildView:n(0,v),removeChildView:o(f,v),registerWriter:function(a){return D.push(a)},registerReader:function(a){return H.push(a)},registerDestroyer:function(a){return J.push(a)},invalidateLayout:function(){return f.layoutCalculated=!1},dispatch:a.dispatch,query:a.query}),P={element:{get:K},childViews:{get:L},rect:{get:M},resting:{get:function(){return t}},isRectIgnored:function(){return C},_read:function(){p=null,v.forEach(function(a){return a._read()}),!(G&&k.width&&k.height)&&F(k,f,h);var a={root:R,props:d,rect:k};H.forEach(function(b){return b(a)})},_write:function(a,b,c){var e=0===b.length;return D.forEach(function(f){!1===f({props:d,root:R,actions:b,timestamp:a,shouldOptimize:c})&&(e=!1)}),x.forEach(function(b){!1===b.write(a)&&(e=!1)}),v.filter(function(a){return!!a.element.parentNode}).forEach(function(d){d._write(a,w(d,b),c)||(e=!1)}),v.forEach(function(d,f){d.element.parentNode||(R.appendChild(d.element,f),d._read(),d._write(a,w(d,b),c),e=!1)}),t=e,A({props:d,root:R,actions:b,timestamp:a}),e},_destroy:function(){x.forEach(function(a){return a.destroy()}),J.forEach(function(a){a({root:R,props:d})}),v.forEach(function(a){return a._destroy()})}},Q=Object.assign({},N,{rect:{get:function(){return k}}});Object.keys(I).sort(function(a,b){return"styles"===a?1:"styles"===b?-1:0}).forEach(function(a){var b=E[a]({mixinConfig:I[a],viewProps:d,viewState:B,viewInternalAPI:O,viewExternalAPI:P,view:i(Q)});b&&x.push(b)});var R=i(O);q({root:R,props:d});var S=r(f);return v.forEach(function(a,b){R.appendChild(a.element,S+b)}),y(R),i(P)}},H=function(a,b){return function(c){var d=c.root,e=c.props,f=c.actions,g=void 0===f?[]:f,h=c.timestamp,i=c.shouldOptimize;g.filter(function(b){return a[b.type]}).forEach(function(b){return a[b.type]({root:d,props:e,action:b.data,timestamp:h,shouldOptimize:i})}),b&&b({root:d,props:e,actions:g,timestamp:h,shouldOptimize:i})}},I=function(a,b){return b.parentNode.insertBefore(a,b)},J=function(a,b){return b.parentNode.insertBefore(a,b.nextSibling)},K=function(a){return Array.isArray(a)},L=function(a){return null==a},M=function(a){return a.trim()},N=function(a){return""+a},O=function(a){return"boolean"==typeof a},P=function(a){return O(a)?a:"true"===a},Q=function(a){return"string"==typeof a},R=function(a){return v(a)?a:Q(a)?N(a).replace(/[a-z]+/gi,""):0},S=function(a){return parseInt(R(a),10)},T=function(a){return parseFloat(R(a))},U=function(a){return v(a)&&isFinite(a)&&Math.floor(a)===a},V=function(a){if(U(a))return a;var b=N(a).trim();return/MB$/i.test(b)?(b=b.replace(/MB$i/,"").trim(),1e3*S(b)*1e3):/KB/i.test(b)?(b=b.replace(/KB$i/,"").trim(),1e3*S(b)):S(b)},W=function(a){return"function"==typeof a},X={process:"POST",patch:"PATCH",revert:"DELETE",fetch:"GET",restore:"GET",load:"GET"},Y=function(a,b,c,d,e){if(null===b)return null;if("function"==typeof b)return b;var f={url:"GET"===c||"PATCH"===c?"?"+a+"=":"",method:c,headers:e,withCredentials:!1,timeout:d,onload:null,ondata:null,onerror:null};if(Q(b))return f.url=b,f;if(Object.assign(f,b),Q(f.headers)){var g=f.headers.split(/:(.+)/);f.headers={header:g[0],value:g[1]}}return f.withCredentials=P(f.withCredentials),f},Z=function(a){return"object"==typeof a&&null!==a},$=function(a){return K(a)?"array":function(a){return null===a}(a)?"null":U(a)?"int":/^[0-9]+ ?(?:GB|MB|KB)$/gi.test(a)?"bytes":function(a){return Z(a)&&Q(a.url)&&Z(a.process)&&Z(a.revert)&&Z(a.restore)&&Z(a.fetch)}(a)?"api":typeof a},_={array:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:",";return L(a)?[]:K(a)?a:N(a).split(b).map(M).filter(function(a){return a.length})},"boolean":P,"int":function(a){return"bytes"===$(a)?V(a):S(a)},number:T,"float":T,bytes:V,string:function(a){return W(a)?a:N(a)},"function":function(a){return function(a){for(var b=self,c=a.split("."),d=null;d=c.shift();)if(!(b=b[d]))return null;return b}(a)},serverapi:function(a){return(c={}).url=Q(b=a)?b:b.url||"",c.timeout=b.timeout?parseInt(b.timeout,10):0,c.headers=b.headers?b.headers:{},h(X,function(a){c[a]=Y(a,b[a],X[a],c.timeout,c.headers)}),c.remove=b.remove||null,delete c.headers,c;var b,c},object:function(a){try{return JSON.parse(a.replace(/{\s*'/g,'{"').replace(/'\s*}/g,'"}').replace(/'\s*:/g,'":').replace(/:\s*'/g,':"').replace(/,\s*'/g,',"').replace(/'\s*,/g,'",'))}catch(a){return null}}},aa=function(a,b,c){if(a===b)return a;var d,e=$(a);if(e!==c){var f=(d=a,_[c](d));if(e=$(f),null===f)throw'Trying to assign value with incorrect type to "'+option+'", allowed type: "'+c+'"';a=f}return a},ba=function(a){var b={};return h(a,function(c){var d,e,f,g=a[c];b[c]=(d=g[0],e=g[1],f=d,{enumerable:!0,get:function(){return f},set:function(a){f=aa(a,d,e)}})}),i(b)},ca=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return a.split(/(?=[A-Z])/).map(function(a){return a.toLowerCase()}).join(b)},da=function(a){return function(b,c,d){var e={};return h(a,function(a){var c=ca(a,"_").toUpperCase();e["SET_"+c]=function(a){try{d.options[e]=a.value}catch(e){}b("DID_SET_"+c,{value:d.options[e]})}}),e}},ea=function(a){return function(b){var c={};return h(a,function(a){c["GET_"+ca(a,"_").toUpperCase()]=function(c){return b.options[a]}}),c}},fa=1,ga=2,ha=3,ia=4,ja=5,ka=function(){return Math.random().toString(36).substr(2,9)},la=function(a,b){return a.splice(b,1)},ma=function(){var a=[],b=function(b,c){la(a,a.findIndex(function(a){return a.event===b&&(a.cb===c||!c)}))};return{fire:function(b){for(var c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];a.filter(function(a){return a.event===b}).map(function(a){return a.cb}).forEach(function(a){setTimeout(function(){a.apply(void 0,d)},0)})},on:function(b,c){a.push({event:b,cb:c})},onOnce:function(c,d){a.push({event:c,cb:function(){b(c,d),d.apply(void 0,arguments)}})},off:b}},na=function(a,b,c){Object.getOwnPropertyNames(a).filter(function(a){return!c.includes(a)}).forEach(function(c){return Object.defineProperty(b,c,Object.getOwnPropertyDescriptor(a,c))})},oa=["fire","process","revert","load","on","off","onOnce","retryLoad","extend","archive","archived","release","released","requestProcessing","freeze"],pa=function(a){var b={};return na(a,b,oa),b},qa={INIT:1,IDLE:2,PROCESSING_QUEUED:9,PROCESSING:3,PROCESSING_COMPLETE:5,PROCESSING_ERROR:6,PROCESSING_REVERT_ERROR:10,LOADING:7,LOAD_ERROR:8},ra={INPUT:1,LIMBO:2,LOCAL:3},sa=function(a){return/[^0-9]+/.exec(a)},ta=function(){return sa(1.1.toLocaleString())[0]},ua={BOOLEAN:"boolean",INT:"int",NUMBER:"number",STRING:"string",ARRAY:"array",OBJECT:"object",FUNCTION:"function",ACTION:"action",SERVER_API:"serverapi",REGEX:"regex"},va=[],wa=function(a,b,c){return new Promise(function(d,e){var f=va.filter(function(b){return b.key===a}).map(function(a){return a.cb});if(0!==f.length){var g=f.shift();f.reduce(function(a,b){return a.then(function(a){return b(a,c)})},g(b,c)).then(function(a){return d(a)})["catch"](function(a){return e(a)})}else d(b)})},xa=function(a,b,c){return va.filter(function(b){return b.key===a}).map(function(a){return a.cb(b,c)})},ya=function(a,b){return va.push({key:a,cb:b})},za=function(){return Object.assign({},Aa)},Aa={id:[null,ua.STRING],name:["filepond",ua.STRING],disabled:[!1,ua.BOOLEAN],className:[null,ua.STRING],required:[!1,ua.BOOLEAN],captureMethod:[null,ua.STRING],allowDrop:[!0,ua.BOOLEAN],allowBrowse:[!0,ua.BOOLEAN],allowPaste:[!0,ua.BOOLEAN],allowMultiple:[!1,ua.BOOLEAN],allowReplace:[!0,ua.BOOLEAN],allowRevert:[!0,ua.BOOLEAN],allowReorder:[!1,ua.BOOLEAN],allowDirectoriesOnly:[!1,ua.BOOLEAN],forceRevert:[!1,ua.BOOLEAN],maxFiles:[null,ua.INT],checkValidity:[!1,ua.BOOLEAN],itemInsertLocationFreedom:[!0,ua.BOOLEAN],itemInsertLocation:["before",ua.STRING],itemInsertInterval:[75,ua.INT],dropOnPage:[!1,ua.BOOLEAN],dropOnElement:[!0,ua.BOOLEAN],dropValidation:[!1,ua.BOOLEAN],ignoredFiles:[[".ds_store","thumbs.db","desktop.ini"],ua.ARRAY],instantUpload:[!0,ua.BOOLEAN],maxParallelUploads:[2,ua.INT],chunkUploads:[!1,ua.BOOLEAN],chunkForce:[!1,ua.BOOLEAN],chunkSize:[5e6,ua.INT],chunkRetryDelays:[[500,1e3,3e3],ua.Array],server:[null,ua.SERVER_API],labelDecimalSeparator:[ta(),ua.STRING],labelThousandsSeparator:[(f=ta(),g=1e3.toLocaleString(),g!==1e3.toString()?sa(g)[0]:"."===f?",":"."),ua.STRING],labelIdle:['Drag & Drop your files or <span class="filepond--label-action">Browse</span>',ua.STRING],labelInvalidField:["Field contains invalid files",ua.STRING],labelFileWaitingForSize:["Waiting for size",ua.STRING],labelFileSizeNotAvailable:["Size not available",ua.STRING],labelFileCountSingular:["file in list",ua.STRING],labelFileCountPlural:["files in list",ua.STRING],labelFileLoading:["Loading",ua.STRING],labelFileAdded:["Added",ua.STRING],labelFileLoadError:["Error during load",ua.STRING],labelFileRemoved:["Removed",ua.STRING],labelFileRemoveError:["Error during remove",ua.STRING],labelFileProcessing:["Uploading",ua.STRING],labelFileProcessingComplete:["Upload complete",ua.STRING],labelFileProcessingAborted:["Upload cancelled",ua.STRING],labelFileProcessingError:["Error during upload",ua.STRING],labelFileProcessingRevertError:["Error during revert",ua.STRING],labelTapToCancel:["tap to cancel",ua.STRING],labelTapToRetry:["tap to retry",ua.STRING],labelTapToUndo:["tap to undo",ua.STRING],labelButtonRemoveItem:["Remove",ua.STRING],labelButtonAbortItemLoad:["Abort",ua.STRING],labelButtonRetryItemLoad:["Retry",ua.STRING],labelButtonAbortItemProcessing:["Cancel",ua.STRING],labelButtonUndoItemProcessing:["Undo",ua.STRING],labelButtonRetryItemProcessing:["Retry",ua.STRING],labelButtonProcessItem:["Upload",ua.STRING],iconRemove:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M11.586 13l-2.293 2.293a1 1 0 0 0 1.414 1.414L13 14.414l2.293 2.293a1 1 0 0 0 1.414-1.414L14.414 13l2.293-2.293a1 1 0 0 0-1.414-1.414L13 11.586l-2.293-2.293a1 1 0 0 0-1.414 1.414L11.586 13z" fill="currentColor" fill-rule="nonzero"/></svg>',ua.STRING],iconProcess:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M14 10.414v3.585a1 1 0 0 1-2 0v-3.585l-1.293 1.293a1 1 0 0 1-1.414-1.415l3-3a1 1 0 0 1 1.414 0l3 3a1 1 0 0 1-1.414 1.415L14 10.414zM9 18a1 1 0 0 1 0-2h8a1 1 0 0 1 0 2H9z" fill="currentColor" fill-rule="evenodd"/></svg>',ua.STRING],iconRetry:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M10.81 9.185l-.038.02A4.997 4.997 0 0 0 8 13.683a5 5 0 0 0 5 5 5 5 0 0 0 5-5 1 1 0 0 1 2 0A7 7 0 1 1 9.722 7.496l-.842-.21a.999.999 0 1 1 .484-1.94l3.23.806c.535.133.86.675.73 1.21l-.804 3.233a.997.997 0 0 1-1.21.73.997.997 0 0 1-.73-1.21l.23-.928v-.002z" fill="currentColor" fill-rule="nonzero"/></svg>',ua.STRING],iconUndo:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M9.185 10.81l.02-.038A4.997 4.997 0 0 1 13.683 8a5 5 0 0 1 5 5 5 5 0 0 1-5 5 1 1 0 0 0 0 2A7 7 0 1 0 7.496 9.722l-.21-.842a.999.999 0 1 0-1.94.484l.806 3.23c.133.535.675.86 1.21.73l3.233-.803a.997.997 0 0 0 .73-1.21.997.997 0 0 0-1.21-.73l-.928.23-.002-.001z" fill="currentColor" fill-rule="nonzero"/></svg>',ua.STRING],iconDone:['<svg width="26" height="26" viewBox="0 0 26 26" xmlns="http://www.w3.org/2000/svg"><path d="M18.293 9.293a1 1 0 0 1 1.414 1.414l-7.002 7a1 1 0 0 1-1.414 0l-3.998-4a1 1 0 1 1 1.414-1.414L12 15.586l6.294-6.293z" fill="currentColor" fill-rule="nonzero"/></svg>',ua.STRING],oninit:[null,ua.FUNCTION],onwarning:[null,ua.FUNCTION],onerror:[null,ua.FUNCTION],onactivatefile:[null,ua.FUNCTION],onaddfilestart:[null,ua.FUNCTION],onaddfileprogress:[null,ua.FUNCTION],onaddfile:[null,ua.FUNCTION],onprocessfilestart:[null,ua.FUNCTION],onprocessfileprogress:[null,ua.FUNCTION],onprocessfileabort:[null,ua.FUNCTION],onprocessfilerevert:[null,ua.FUNCTION],onprocessfile:[null,ua.FUNCTION],onprocessfiles:[null,ua.FUNCTION],onremovefile:[null,ua.FUNCTION],onpreparefile:[null,ua.FUNCTION],onupdatefiles:[null,ua.FUNCTION],onreorderfiles:[null,ua.FUNCTION],beforeDropFile:[null,ua.FUNCTION],beforeAddFile:[null,ua.FUNCTION],beforeRemoveFile:[null,ua.FUNCTION],stylePanelLayout:[null,ua.STRING],stylePanelAspectRatio:[null,ua.STRING],styleItemPanelAspectRatio:[null,ua.STRING],styleButtonRemoveItemPosition:["left",ua.STRING],styleButtonProcessItemPosition:["right",ua.STRING],styleLoadIndicatorPosition:["right",ua.STRING],styleProgressIndicatorPosition:["right",ua.STRING],files:[[],ua.ARRAY]},Ba=function(a,b){return L(b)?a[0]||null:U(b)?a[b]||null:("object"==typeof b&&(b=b.id),a.find(function(a){return a.id===b})||null)},Ca=function(a){if(L(a))return a;if(/:/.test(a)){var b=a.split(":");return b[1]/b[0]}return parseFloat(a)},Da=function(a){return a.filter(function(a){return!a.archived})},Ea={EMPTY:0,IDLE:1,ERROR:2,BUSY:3,READY:4},Fa=[qa.LOAD_ERROR,qa.PROCESSING_ERROR,qa.PROCESSING_REVERT_ERROR],Ga=[qa.LOADING,qa.PROCESSING,qa.PROCESSING_QUEUED,qa.INIT],Ha=[qa.PROCESSING_COMPLETE],Ia=function(a){return Fa.includes(a.status)},Ja=function(a){return Ga.includes(a.status)},Ka=function(a){return Ha.includes(a.status)},La=function(a){return{GET_STATUS:function(){var b=Da(a.items),c=Ea.EMPTY,d=Ea.ERROR,e=Ea.BUSY,f=Ea.IDLE,g=Ea.READY;return 0===b.length?c:b.some(Ia)?d:b.some(Ja)?e:b.some(Ka)?g:f},GET_ITEM:function(b){return Ba(a.items,b)},GET_ACTIVE_ITEM:function(b){return Ba(Da(a.items),b)},GET_ACTIVE_ITEMS:function(){return Da(a.items)},GET_ITEMS:function(){return a.items},GET_ITEM_NAME:function(b){var c=Ba(a.items,b);return c?c.filename:null},GET_ITEM_SIZE:function(b){var c=Ba(a.items,b);return c?c.fileSize:null},GET_STYLES:function(){return Object.keys(a.options).filter(function(a){return/^style/.test(a)}).map(function(b){return{name:b,value:a.options[b]}})},GET_PANEL_ASPECT_RATIO:function(){return/circle/.test(a.options.stylePanelLayout)?1:Ca(a.options.stylePanelAspectRatio)},GET_ITEM_PANEL_ASPECT_RATIO:function(){return a.options.styleItemPanelAspectRatio},GET_ITEMS_BY_STATUS:function(b){return Da(a.items).filter(function(a){return a.status===b})},GET_TOTAL_ITEMS:function(){return Da(a.items).length},IS_ASYNC:function(){return Z(a.options.server)&&(Z(a.options.server.process)||W(a.options.server.process))}}},Ma=function(a,b,c){return Math.max(Math.min(c,a),b)},Na=function(a){return/^\s*data:([a-z]+\/[a-z0-9-+.]+(;[a-z-]+=[a-z0-9-]+)?)?(;base64)?,([a-z0-9!$&',()*+;=\-._~:@\/?%\s]*)\s*$/i.test(a)},Oa=function(a){return a.split("/").pop().split("?").shift()},Pa=function(a){return a.split(".").pop()},Qa=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";return(b+a).slice(-b.length)},Ra=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:new Date;return a.getFullYear()+"-"+Qa(a.getMonth()+1,"00")+"-"+Qa(a.getDate(),"00")+"_"+Qa(a.getHours(),"00")+"-"+Qa(a.getMinutes(),"00")+"-"+Qa(a.getSeconds(),"00")},Sa=function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,e="string"==typeof c?a.slice(0,a.size,c):a.slice(0,a.size,a.type);return e.lastModifiedDate=new Date,a._relativePath&&(e._relativePath=a._relativePath),Q(b)||(b=Ra()),b&&null===d&&Pa(b)?e.name=b:(d=d||function(a){if("string"!=typeof a)return"";var b=a.split("/").pop();return/svg/.test(b)?"svg":/zip|compressed/.test(b)?"zip":/plain/.test(b)?"txt":/msword/.test(b)?"doc":/[a-z]+/.test(b)?"jpeg"===b?"jpg":b:""}(e.type),e.name=b+(d?"."+d:"")),e},Ta=function(a,b){var c=window.BlobBuilder=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder||window.MSBlobBuilder;if(c){var d=new c;return d.append(a),d.getBlob(b)}return new Blob([a],{type:b})},Ua=function(a){return(/^data:(.+);/.exec(a)||[])[1]||null},Va=function(a){var b=Ua(a);return function(a,b){for(var c=new ArrayBuffer(a.length),d=new Uint8Array(c),e=0;e<a.length;e++)d[e]=a.charCodeAt(e);return Ta(c,b)}(function(a){return atob(function(a){return a.split(",")[1].replace(/\s/g,"")}(a))}(a),b)},Wa=function(a){if(!/^content-disposition:/i.test(a))return null;var b=a.split(/filename=|filename\*=.+''/).splice(1).map(function(a){return a.trim().replace(/^["']|[;"']{0,2}$/g,"")}).filter(function(a){return a.length});return b.length?decodeURI(b[b.length-1]):null},Xa=function(a){if(/content-length:/i.test(a)){var b=a.match(/[0-9]+/)[0];return b?parseInt(b,10):null}return null},Ya=function(a){return/x-content-transfer-id:/i.test(a)&&(a.split(":")[1]||"").trim()||null},Za=function(a){var b={source:null,name:null,size:null},c=a.split("\n"),d=!0,e=!1,f=void 0;try{for(var g,h=c[Symbol.iterator]();!(d=(g=h.next()).done);d=!0){var i=g.value,j=Wa(i);if(j)b.name=j;else{var k=Xa(i);if(k)b.size=k;else{var l=Ya(i);l&&(b.source=l)}}}}catch(a){e=!0,f=a}finally{try{d||null==h["return"]||h["return"]()}finally{if(e)throw f}}return b},$a=function(a){var b={source:null,complete:!1,progress:0,size:null,timestamp:null,duration:0,request:null},c=function(c){a?(b.timestamp=Date.now(),b.request=a(c,function(a){b.duration=Date.now()-b.timestamp,b.complete=!0,a instanceof Blob&&(a=Sa(a,a.name||Oa(c))),d.fire("load",a instanceof Blob?a:a.body)},function(a){d.fire("error","string"==typeof a?{type:"error",code:0,body:a}:a)},function(a,c,e){e&&(b.size=e),b.duration=Date.now()-b.timestamp,a?(b.progress=c/e,d.fire("progress",b.progress)):b.progress=null},function(){d.fire("abort")},function(a){var c=Za("string"==typeof a?a:a.headers);d.fire("meta",{size:b.size||c.size,filename:c.name,source:c.source})})):d.fire("error",{type:"error",body:"Can't load URL",code:400})},d=Object.assign({},ma(),{setSource:function(a){return b.source=a},getProgress:function(){return b.progress},abort:function(){b.request&&b.request.abort&&b.request.abort()},load:function(){var a,e,f=b.source;d.fire("init",f),f instanceof File?d.fire("load",f):f instanceof Blob?d.fire("load",Sa(f,f.name)):Na(f)?d.fire("load",Sa(Va(f),a,null,e)):c(f)}});return d},_a=function(a){return/GET|HEAD/.test(a)},ab=function(a,b,c){var d={onheaders:function(){},onprogress:function(){},onload:function(){},ontimeout:function(){},onerror:function(){},onabort:function(){},abort:function(){e=!0,g.abort()}},e=!1,f=!1;c=Object.assign({method:"POST",headers:{},withCredentials:!1},c),b=encodeURI(b),_a(c.method)&&a&&(b=""+b+encodeURIComponent("string"==typeof a?a:JSON.stringify(a)));var g=new XMLHttpRequest;return(_a(c.method)?g:g.upload).onprogress=function(a){e||d.onprogress(a.lengthComputable,a.loaded,a.total)},g.onreadystatechange=function(){g.readyState<2||4===g.readyState&&0===g.status||f||(f=!0,
d.onheaders(g))},g.onload=function(){g.status>=200&&g.status<300?d.onload(g):d.onerror(g)},g.onerror=function(){return d.onerror(g)},g.onabort=function(){e=!0,d.onabort()},g.ontimeout=function(){return d.ontimeout(g)},g.open(c.method,b,!0),U(c.timeout)&&(g.timeout=c.timeout),Object.keys(c.headers).forEach(function(a){var b=unescape(encodeURIComponent(c.headers[a]));g.setRequestHeader(a,b)}),c.responseType&&(g.responseType=c.responseType),c.withCredentials&&(g.withCredentials=!0),g.send(a),d},bb=function(a,b,c,d){return{type:a,code:b,body:c,headers:d}},cb=function(a){return function(b){a(bb("error",0,"Timeout",b.getAllResponseHeaders()))}},db=function(a){return/\?/.test(a)},eb=function(){for(var a="",b=arguments.length,c=new Array(b),d=0;d<b;d++)c[d]=arguments[d];return c.forEach(function(b){a+=db(a)&&db(b)?b.replace(/\?/,"&"):b}),a},fb=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1?arguments[1]:void 0;if("function"==typeof b)return b;if(!b||!Q(b.url))return null;var c=b.onload||function(a){return a},d=b.onerror||function(a){return null};return function(e,f,g,h,i,j){var k=ab(e,eb(a,b.url),Object.assign({},b,{responseType:"blob"}));return k.onload=function(a){var b=a.getAllResponseHeaders(),d=Za(b).name||Oa(e);f(bb("load",a.status,Sa(c(a.response),d),b))},k.onerror=function(a){g(bb("error",a.status,d(a.response)||a.statusText,a.getAllResponseHeaders()))},k.onheaders=function(a){j(bb("headers",a.status,null,a.getAllResponseHeaders()))},k.ontimeout=cb(g),k.onprogress=h,k.onabort=i,k}};"function"==typeof Symbol&&Symbol.asyncIterator&&(c.prototype[Symbol.asyncIterator]=function(){return this}),c.prototype.next=function(a){return this._invoke("next",a)},c.prototype["throw"]=function(a){return this._invoke("throw",a)},c.prototype["return"]=function(a){return this._invoke("return",a)};var gb=0,hb=1,ib=2,jb=3,kb=4,lb=function(a,b,c,e,f,g,h,i,j,k,l){for(var m=[],n=l.chunkTransferId,o=l.chunkServer,p=l.chunkSize,q=l.chunkRetryDelays,r={serverId:n,aborted:!1},s=b.ondata||function(a){return a},t=b.onload||function(a,b){return"HEAD"===b?a.getResponseHeader("Upload-Offset"):a.response},u=b.onerror||function(a){return null},v=Math.floor(e.size/p),w=0;w<=v;w++){var x=w*p,y=e.slice(x,x+p,"application/offset+octet-stream");m[w]={index:w,size:y.size,offset:x,data:y,file:e,progress:0,retries:d(q),status:gb,error:null,request:null,timeout:null}}var z,A,B,C,D=function(a){return a.status===gb||a.status===jb},E=function(b){if(!r.aborted)if(b=b||m.find(D)){b.status=ib,b.progress=null;var c=o.ondata||function(a){return a},d=o.onerror||function(a){return null},f=eb(a,o.url,r.serverId),i="function"==typeof o.headers?o.headers(b):Object.assign({},o.headers,{"Content-Type":"application/offset+octet-stream","Upload-Offset":b.offset,"Upload-Length":e.size,"Upload-Name":e.name}),k=b.request=ab(c(b.data),f,Object.assign({},o,{headers:i}));k.onload=function(){b.status=hb,b.request=null,H()},k.onprogress=function(a,c,d){b.progress=a?c:null,G()},k.onerror=function(a){b.status=jb,b.request=null,b.error=d(a.response)||a.statusText,F(b)||h(bb("error",a.status,d(a.response)||a.statusText,a.getAllResponseHeaders()))},k.ontimeout=function(a){b.status=jb,b.request=null,F(b)||cb(h)(a)},k.onabort=function(){b.status=gb,b.request=null,j()}}else m.every(function(a){return a.status===hb})&&g(r.serverId)},F=function(a){return 0!==a.retries.length&&(a.status=kb,clearTimeout(a.timeout),a.timeout=setTimeout(function(){E(a)},a.retries.shift()),!0)},G=function(){var a=m.reduce(function(a,b){return null===a||null===b.progress?null:a+b.progress},0);if(null===a)return i(!1,0,0);var b=m.reduce(function(a,b){return a+b.size},0);i(!0,a,b)},H=function(){m.filter(function(a){return a.status===ib}).length>=1||E()};return r.serverId?(z=function(a){r.aborted||(m.filter(function(b){return b.offset<a}).forEach(function(a){a.status=hb,a.progress=a.size}),H())},A=eb(a,o.url,r.serverId),B={headers:"function"==typeof b.headers?b.headers(r.serverId):Object.assign({},b.headers),method:"HEAD"},(C=ab(null,A,B)).onload=function(a){return z(t(a,B.method))},C.onerror=function(a){return h(bb("error",a.status,u(a.response)||a.statusText,a.getAllResponseHeaders()))},C.ontimeout=cb(h)):function(d){var g=new FormData;Z(f)&&g.append(c,JSON.stringify(f));var i="function"==typeof b.headers?b.headers(e,f):Object.assign({},b.headers,{"Upload-Length":e.size}),j=Object.assign({},b,{headers:i}),k=ab(s(g),eb(a,b.url),j);k.onload=function(a){return d(t(a,j.method))},k.onerror=function(a){return h(bb("error",a.status,u(a.response)||a.statusText,a.getAllResponseHeaders()))},k.ontimeout=cb(h)}(function(a){r.aborted||(k(a),r.serverId=a,H())}),{abort:function(){r.aborted=!0,m.forEach(function(a){clearTimeout(a.timeout),a.request&&a.request.abort()})}}},mb=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1?arguments[1]:void 0,c=arguments.length>2?arguments[2]:void 0,d=arguments.length>3?arguments[3]:void 0;return"function"==typeof b?function(){for(var a=arguments.length,e=new Array(a),f=0;f<a;f++)e[f]=arguments[f];return b.apply(void 0,[c].concat(e,[d]))}:b&&Q(b.url)?function(a,b,c,d){return function(e,f,g,h,i,j,k){if(e){var l=d.chunkUploads,m=l&&e.size>d.chunkSize,n=l&&(m||d.chunkForce);if(e instanceof Blob&&n)return lb(a,b,c,e,f,g,h,i,j,k,d);var o=b.ondata||function(a){return a},p=b.onload||function(a){return a},q=b.onerror||function(a){return null},r=new FormData;Z(f)&&r.append(c,JSON.stringify(f)),(e instanceof Blob?[{name:null,file:e}]:e).forEach(function(a){r.append(c,a.file,null===a.name?a.file.name:""+a.name+a.file.name)});var s=ab(o(r),eb(a,b.url),b);return s.onload=function(a){g(bb("load",a.status,p(a.response),a.getAllResponseHeaders()))},s.onerror=function(a){h(bb("error",a.status,q(a.response)||a.statusText,a.getAllResponseHeaders()))},s.ontimeout=cb(h),s.onprogress=i,s.onabort=j,s}}}(a,b,c,d):null},nb=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",b=arguments.length>1?arguments[1]:void 0;if("function"==typeof b)return b;if(!b||!Q(b.url))return function(a,b){return b()};var c=b.onload||function(a){return a},d=b.onerror||function(a){return null};return function(e,f,g){var h=ab(e,a+b.url,b);return h.onload=function(a){f(bb("load",a.status,c(a.response),a.getAllResponseHeaders()))},h.onerror=function(a){g(bb("error",a.status,d(a.response)||a.statusText,a.getAllResponseHeaders()))},h.ontimeout=cb(g),h}},ob=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:0,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;return a+Math.random()*(b-a)},pb=function(a){var b={complete:!1,perceivedProgress:0,perceivedPerformanceUpdater:null,progress:null,timestamp:null,perceivedDuration:0,duration:0,request:null,response:null},c=function(){b.request&&(b.perceivedPerformanceUpdater.clear(),b.request.abort(),b.complete=!0)},d=Object.assign({},ma(),{process:function(c,e){var f=function(){0!==b.duration&&null!==b.progress&&d.fire("progress",d.getProgress())},g=function(){b.complete=!0,d.fire("load-perceived",b.response.body)};d.fire("start"),b.timestamp=Date.now(),b.perceivedPerformanceUpdater=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1e3,c=(arguments.length>2&&void 0!==arguments[2]&&arguments[2],arguments.length>3&&void 0!==arguments[3]?arguments[3]:25),d=arguments.length>4&&void 0!==arguments[4]?arguments[4]:250,e=null,f=Date.now();return function g(){var h=Date.now()-f,i=ob(c,d);h+i>b&&(i=h+i-b);var j=h/b;j>=1?a(1):(a(j),e=setTimeout(g,i))}(),{clear:function(){clearTimeout(e)}}}(function(a){b.perceivedProgress=a,b.perceivedDuration=Date.now()-b.timestamp,f(),b.response&&1===b.perceivedProgress&&!b.complete&&g()},ob(750,1500)),b.request=a(c,e,function(a){b.response=Z(a)?a:{type:"load",code:200,body:""+a,headers:{}},b.duration=Date.now()-b.timestamp,b.progress=1,d.fire("load",b.response.body),1===b.perceivedProgress&&g()},function(a){b.perceivedPerformanceUpdater.clear(),d.fire("error",Z(a)?a:{type:"error",code:0,body:""+a})},function(a,c,d){b.duration=Date.now()-b.timestamp,b.progress=a?c/d:null,f()},function(){b.perceivedPerformanceUpdater.clear(),d.fire("abort",b.response?b.response.body:null)},function(a){d.fire("transfer",a)})},abort:c,getProgress:function(){return b.progress?Math.min(b.progress,b.perceivedProgress):null},getDuration:function(){return Math.min(b.duration,b.perceivedDuration)},reset:function(){c(),b.complete=!1,b.perceivedProgress=0,b.progress=0,b.timestamp=null,b.perceivedDuration=0,b.duration=0,b.request=null,b.response=null}});return d},qb=function(a){return a.substr(0,a.lastIndexOf("."))||a},rb=function(a){return!!(a instanceof File||a instanceof Blob&&a.name)},sb=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,d=ka(),e={archived:!1,frozen:!1,released:!1,source:null,file:c,serverFileReference:b,transferId:null,processingAborted:!1,status:b?qa.PROCESSING_COMPLETE:qa.INIT,activeLoader:null,activeProcessor:null},f=null,g={},h=function(a){return e.status=a},j=function(a){if(!e.released&&!e.frozen){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];l.fire.apply(l,[a].concat(c))}},k=function(a,b,c){var d=a.split("."),e=d[0],f=d.pop(),h=g;d.forEach(function(a){return h=h[a]}),JSON.stringify(h[f])!==JSON.stringify(b)&&(h[f]=b,c||j("metadata-update",{key:e,value:g[e]}))},l=Object.assign({id:{get:function(){return d}},origin:{get:function(){return a}},serverId:{get:function(){return e.serverFileReference}},transferId:{get:function(){return e.transferId}},status:{get:function(){return e.status}},filename:{get:function(){return e.file.name}},filenameWithoutExtension:{get:function(){return qb(e.file.name)}},fileExtension:{get:function(){return Pa(e.file.name)}},fileType:{get:function(){return e.file.type}},fileSize:{get:function(){return e.file.size}},file:{get:function(){return e.file}},relativePath:{get:function(){return e.file._relativePath}},source:{get:function(){return e.source}},getMetadata:function(a){return function b(a){if(!Z(a))return a;var c=K(a)?[]:{};for(var d in a)if(a.hasOwnProperty(d)){var e=a[d];c[d]=e&&Z(e)?b(e):e}return c}(a?g[a]:g)},setMetadata:function(a,b,c){if(Z(a)){var d=a;return Object.keys(d).forEach(function(a){k(a,d[a],b)}),a}return k(a,b,c),b},extend:function(a,b){return m[a]=b},abortLoad:function(){e.activeLoader?e.activeLoader.abort():(h(qa.INIT),j("load-abort"))},retryLoad:function(){e.activeLoader&&e.activeLoader.load()},requestProcessing:function(){e.processingAborted=!1,h(qa.PROCESSING_QUEUED)},abortProcessing:function(){return new Promise(function(a){return e.activeProcessor?(f=function(){a()},void e.activeProcessor.abort()):(e.processingAborted=!0,h(qa.IDLE),j("process-abort"),void a())})},load:function(b,c,d){e.source=b,e.file?j("load-skip"):(e.file=function(a){var b=[a.name,a.size,a.type];return a instanceof Blob||Na(a)?b[0]=a.name||Ra():Na(a)?(b[1]=a.length,b[2]=Ua(a)):Q(a)&&(b[0]=Oa(a),b[1]=0,b[2]="application/octet-stream"),{name:b[0],size:b[1],type:b[2]}}(b),c.on("init",function(){j("load-init")}),c.on("meta",function(b){e.file.size=b.size,e.file.filename=b.filename,b.source&&(a=ra.LIMBO,e.serverFileReference=b.source,e.status=qa.PROCESSING_COMPLETE),j("load-meta")}),c.on("progress",function(a){h(qa.LOADING),j("load-progress",a)}),c.on("error",function(a){h(qa.LOAD_ERROR),j("load-request-error",a)}),c.on("abort",function(){h(qa.INIT),j("load-abort")}),c.on("load",function(b){e.activeLoader=null;var c=function(b){e.file=rb(b)?b:e.file,h(a===ra.LIMBO&&e.serverFileReference?qa.PROCESSING_COMPLETE:qa.IDLE),j("load")};e.serverFileReference?c(b):d(b,c,function(a){e.file=b,j("load-meta"),h(qa.LOAD_ERROR),j("load-file-error",a)})}),c.setSource(b),e.activeLoader=c,c.load())},process:function n(a,b){if(e.processingAborted)e.processingAborted=!1;else if(h(qa.PROCESSING),f=null,e.file instanceof Blob){a.on("load",function(a){e.transferId=null,e.serverFileReference=a}),a.on("transfer",function(a){e.transferId=a}),a.on("load-perceived",function(a){e.activeProcessor=null,e.transferId=null,e.serverFileReference=a,h(qa.PROCESSING_COMPLETE),j("process-complete",a)}),a.on("start",function(){j("process-start")}),a.on("error",function(a){e.activeProcessor=null,h(qa.PROCESSING_ERROR),j("process-error",a)}),a.on("abort",function(a){e.activeProcessor=null,e.transferId=null,e.serverFileReference=a,h(qa.IDLE),j("process-abort"),f&&f()}),a.on("progress",function(a){j("process-progress",a)});var c=console.error;b(e.file,function(b){e.archived||a.process(b,Object.assign({},g))},c),e.activeProcessor=a}else l.on("load",function(){n(a,b)})},revert:function(a,b){return new Promise(function(c,d){null!==e.serverFileReference?(a(e.serverFileReference,function(){e.serverFileReference=null,c()},function(a){b?(h(qa.PROCESSING_REVERT_ERROR),j("process-revert-error"),d(a)):c()}),h(qa.IDLE),j("process-revert")):c()})}},ma(),{freeze:function(){return e.frozen=!0},release:function(){return e.released=!0},released:{get:function(){return e.released}},archive:function(){return e.archived=!0},archived:{get:function(){return e.archived}}}),m=i(l);return m},tb=function(a,b){var c=function(a,b){return L(b)?0:Q(b)?a.findIndex(function(a){return a.id===b}):-1}(a,b);if(!(c<0))return a[c]||null},ub=function(a,b,c,d,e,f){var g=ab(null,a,{method:"GET",responseType:"blob"});return g.onload=function(c){var d=c.getAllResponseHeaders(),e=Za(d).name||Oa(a);b(bb("load",c.status,Sa(c.response,e),d))},g.onerror=function(a){c(bb("error",a.status,a.statusText,a.getAllResponseHeaders()))},g.onheaders=function(a){f(bb("headers",a.status,null,a.getAllResponseHeaders()))},g.ontimeout=cb(c),g.onprogress=d,g.onabort=e,g},vb=function(a){return 0===a.indexOf("//")&&(a=location.protocol+a),a.toLowerCase().replace("blob:","").replace(/([a-z])?:\/\//,"$1").split("/")[0]},wb=function(a){return function(){return W(a)?a.apply(void 0,arguments):a}},xb=function(a,b){clearTimeout(b.listUpdateTimeout),b.listUpdateTimeout=setTimeout(function(){a("DID_UPDATE_ITEMS",{items:Da(b.items)})},0)},yb=function(a){for(var b=arguments.length,c=new Array(b>1?b-1:0),d=1;d<b;d++)c[d-1]=arguments[d];return new Promise(function(b){if(!a)return b(!0);var d=a.apply(void 0,c);return null==d?b(!0):"boolean"==typeof d?b(d):void("function"==typeof d.then&&d.then(b))})},zb=function(a,b){a.items.sort(function(a,c){return b(pa(a),pa(c))})},Ab=function(a,b){return function(){var c=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},d=c.query,e=c.success,f=void 0===e?function(){}:e,g=c.failure,h=void 0===g?function(){}:g,i=Ba(a.items,d);i?b(i,f,h):h({error:bb("error",0,"Item not found"),file:null})}},Bb=function(a,b,c){return{ABORT_ALL:function(){Da(c.items).forEach(function(a){a.freeze(),a.abortLoad(),a.abortProcessing()})},DID_SET_FILES:function(b){var d=b.value,e=(void 0===d?[]:d).map(function(a){return{source:a.source?a.source:a,options:a.options}}),f=Da(c.items);f.forEach(function(b){e.find(function(a){return a.source===b.source||a.source===b.file})||a("REMOVE_ITEM",{query:b})}),f=Da(c.items),e.forEach(function(b,c){f.find(function(a){return a.source===b.source||a.file===b.source})||a("ADD_ITEM",Object.assign({},b,{interactionMethod:ja,index:c}))})},DID_UPDATE_ITEM_METADATA:function(d){var e=d.id;clearTimeout(c.itemUpdateTimeout),c.itemUpdateTimeout=setTimeout(function(){var d=tb(c.items,e);if(b("IS_ASYNC")){var f,g=function(){setTimeout(function(){a("REQUEST_ITEM_PROCESSING",{query:e})},32)};return d.status===qa.PROCESSING_COMPLETE?(f=c.options.instantUpload,void d.revert(nb(c.options.server.url,c.options.server.revert),b("GET_FORCE_REVERT")).then(f?g:function(){})["catch"](function(){})):d.status===qa.PROCESSING?function(a){d.abortProcessing().then(a?g:function(){})}(c.options.instantUpload):void(c.options.instantUpload&&g())}wa("SHOULD_PREPARE_OUTPUT",!1,{item:d,query:b}).then(function(b){b&&a("REQUEST_PREPARE_OUTPUT",{query:e,item:d,success:function(b){a("DID_PREPARE_OUTPUT",{id:e,file:b})}},!0)})},0)},MOVE_ITEM:function(a){var b=a.query,d=a.index,e=Ba(c.items,b);if(e){var f=c.items.indexOf(e);f!==(d=Ma(d,0,c.items.length-1))&&c.items.splice(d,0,c.items.splice(f,1)[0])}},SORT:function(a){var b=a.compare;zb(c,b)},ADD_ITEMS:function(c){var d=c.items,e=c.index,f=c.interactionMethod,g=c.success,h=void 0===g?function(){}:g,i=c.failure,j=void 0===i?function(){}:i,k=e;if(-1===e||void 0===e){var l=b("GET_ITEM_INSERT_LOCATION"),m=b("GET_TOTAL_ITEMS");k="before"===l?0:m}var n=b("GET_IGNORED_FILES"),o=d.filter(function(a){return rb(a)?!n.includes(a.name.toLowerCase()):!L(a)}).map(function(b){return new Promise(function(c,d){a("ADD_ITEM",{interactionMethod:f,source:b.source||b,success:c,failure:d,index:k++,options:b.options||{}})})});Promise.all(o).then(h)["catch"](j)},ADD_ITEM:function(d){var e=d.source,f=d.index,g=void 0===f?-1:f,h=d.interactionMethod,i=d.success,j=void 0===i?function(){}:i,k=d.failure,l=void 0===k?function(){}:k,m=d.options,n=void 0===m?{}:m;if(L(e))l({error:bb("error",0,"No source"),file:null});else if(!rb(e)||!c.options.ignoredFiles.includes(e.name.toLowerCase())){if(!function(a){var b=Da(a.items).length;if(!a.options.allowMultiple)return 0===b;var c=a.options.maxFiles;return null===c||b<c}(c)){if(c.options.allowMultiple||!c.options.allowMultiple&&!c.options.allowReplace){var o=bb("warning",0,"Max files");return a("DID_THROW_MAX_FILES",{source:e,error:o}),void l({error:o,file:null})}var p=Da(c.items)[0];if(p.status===qa.PROCESSING_COMPLETE||p.status===qa.PROCESSING_REVERT_ERROR){var q=b("GET_FORCE_REVERT");if(p.revert(nb(c.options.server.url,c.options.server.revert),q).then(function(){q&&a("ADD_ITEM",{source:e,index:g,interactionMethod:h,success:j,failure:l,options:n})})["catch"](function(){}),q)return}a("REMOVE_ITEM",{query:p.id})}var r="local"===n.type?ra.LOCAL:"limbo"===n.type?ra.LIMBO:ra.INPUT,s=sb(r,r===ra.INPUT?null:e,n.file);Object.keys(n.metadata||{}).forEach(function(a){s.setMetadata(a,n.metadata[a])}),xa("DID_CREATE_ITEM",s,{query:b,dispatch:a});var t=b("GET_ITEM_INSERT_LOCATION");c.options.itemInsertLocationFreedom||(g="before"===t?-1:c.items.length),function(a,b,c){L(b)||(void 0===c?a.push(b):function(a,b,c){a.splice(b,0,c)}(a,c=Ma(c,0,a.length),b))}(c.items,s,g),W(t)&&e&&zb(c,t);var u=s.id;s.on("load-init",function(){a("DID_START_ITEM_LOAD",{id:u})}),s.on("load-meta",function(){a("DID_UPDATE_ITEM_META",{id:u})}),s.on("load-progress",function(b){a("DID_UPDATE_ITEM_LOAD_PROGRESS",{id:u,progress:b})}),s.on("load-request-error",function(b){var d=wb(c.options.labelFileLoadError)(b);return b.code>=400&&b.code<500?(a("DID_THROW_ITEM_INVALID",{id:u,error:b,status:{main:d,sub:b.code+" ("+b.body+")"}}),void l({error:b,file:pa(s)})):void a("DID_THROW_ITEM_LOAD_ERROR",{id:u,error:b,status:{main:d,sub:c.options.labelTapToRetry}})}),s.on("load-file-error",function(b){a("DID_THROW_ITEM_INVALID",{id:u,error:b.status,status:b.status}),l({error:b.status,file:pa(s)})}),s.on("load-abort",function(){a("REMOVE_ITEM",{query:u})}),s.on("load-skip",function(){a("COMPLETE_LOAD_ITEM",{query:u,item:s,data:{source:e,success:j}})}),s.on("load",function(){var d=function(d){d?(s.on("metadata-update",function(b){a("DID_UPDATE_ITEM_METADATA",{id:u,change:b})}),wa("SHOULD_PREPARE_OUTPUT",!1,{item:s,query:b}).then(function(b){var d=function(){a("COMPLETE_LOAD_ITEM",{query:u,item:s,data:{source:e,success:j}}),xb(a,c)};b?a("REQUEST_PREPARE_OUTPUT",{query:u,item:s,success:function(b){a("DID_PREPARE_OUTPUT",{id:u,file:b}),d()}},!0):d()})):a("REMOVE_ITEM",{query:u})};wa("DID_LOAD_ITEM",s,{query:b,dispatch:a}).then(function(){yb(b("GET_BEFORE_ADD_FILE"),pa(s)).then(d)})["catch"](function(){d(!1)})}),s.on("process-start",function(){a("DID_START_ITEM_PROCESSING",{id:u})}),s.on("process-progress",function(b){a("DID_UPDATE_ITEM_PROCESS_PROGRESS",{id:u,progress:b})}),s.on("process-error",function(b){a("DID_THROW_ITEM_PROCESSING_ERROR",{id:u,error:b,status:{main:wb(c.options.labelFileProcessingError)(b),sub:c.options.labelTapToRetry}})}),s.on("process-revert-error",function(b){a("DID_THROW_ITEM_PROCESSING_REVERT_ERROR",{id:u,error:b,status:{main:wb(c.options.labelFileProcessingRevertError)(b),sub:c.options.labelTapToRetry}})}),s.on("process-complete",function(b){a("DID_COMPLETE_ITEM_PROCESSING",{id:u,error:null,serverFileReference:b})}),s.on("process-abort",function(){a("DID_ABORT_ITEM_PROCESSING",{id:u})}),s.on("process-revert",function(){a("DID_REVERT_ITEM_PROCESSING",{id:u})}),a("DID_ADD_ITEM",{id:u,index:g,interactionMethod:h}),xb(a,c);var v=c.options.server||{},w=v.url,x=v.load,y=v.restore,z=v.fetch;s.load(e,$a(r===ra.INPUT?Q(e)&&function(a){return(a.indexOf(":")>-1||a.indexOf("//")>-1)&&vb(location.href)!==vb(a)}(e)?fb(w,z):ub:fb(w,r===ra.LIMBO?y:x)),function(a,c,d){wa("LOAD_FILE",a,{query:b}).then(c)["catch"](d)})}},REQUEST_PREPARE_OUTPUT:function(a){var c=a.item,d=a.success,e=a.failure,f=void 0===e?function(){}:e,g={error:bb("error",0,"Item not found"),file:null};return c.archived?f(g):void wa("PREPARE_OUTPUT",c.file,{query:b,item:c}).then(function(a){wa("COMPLETE_PREPARE_OUTPUT",a,{query:b,item:c}).then(function(a){return c.archived?f(g):void d(a)})})},COMPLETE_LOAD_ITEM:function(d){var e=d.item,f=d.data,g=f.success,h=f.source,i=b("GET_ITEM_INSERT_LOCATION");W(i)&&h&&zb(c,i),a("DID_LOAD_ITEM",{id:e.id,error:null,serverFileReference:e.origin===ra.INPUT?null:h}),g(pa(e)),e.origin!==ra.LOCAL?e.origin!==ra.LIMBO?b("IS_ASYNC")&&c.options.instantUpload&&a("REQUEST_ITEM_PROCESSING",{query:e.id}):a("DID_COMPLETE_ITEM_PROCESSING",{id:e.id,error:null,serverFileReference:h}):a("DID_LOAD_LOCAL_ITEM",{id:e.id})},RETRY_ITEM_LOAD:Ab(c,function(a){a.retryLoad()}),REQUEST_ITEM_PREPARE:Ab(c,function(b,c,d){a("REQUEST_PREPARE_OUTPUT",{query:b.id,item:b,success:function(d){a("DID_PREPARE_OUTPUT",{id:b.id,file:d}),c({file:b,output:d})},failure:d},!0)}),REQUEST_ITEM_PROCESSING:Ab(c,function(d,e,f){if(d.status===qa.IDLE||d.status===qa.PROCESSING_ERROR)d.status!==qa.PROCESSING_QUEUED&&(d.requestProcessing(),a("DID_REQUEST_ITEM_PROCESSING",{id:d.id}),a("PROCESS_ITEM",{query:d,success:e,failure:f},!0));else{var g=function(){setTimeout(function(){a("REQUEST_ITEM_PROCESSING",{query:d,success:e,failure:f})},32)};d.status===qa.PROCESSING_COMPLETE||d.status===qa.PROCESSING_REVERT_ERROR?d.revert(nb(c.options.server.url,c.options.server.revert),b("GET_FORCE_REVERT")).then(g)["catch"](function(){}):d.status===qa.PROCESSING&&d.abortProcessing().then(g)}}),PROCESS_ITEM:Ab(c,function(d,e,f){var g=b("GET_MAX_PARALLEL_UPLOADS");if(b("GET_ITEMS_BY_STATUS",qa.PROCESSING).length!==g){if(d.status!==qa.PROCESSING){var h=function j(){var b=c.processingQueue.shift();if(b){var d=b.id,e=b.success,f=b.failure,g=Ba(c.items,d);g&&!g.archived?a("PROCESS_ITEM",{query:d,success:e,failure:f},!0):j()}};d.onOnce("process-complete",function(){e(pa(d)),h(),b("GET_ITEMS_BY_STATUS",qa.PROCESSING_COMPLETE).length===c.items.length&&a("DID_COMPLETE_ITEM_PROCESSING_ALL")}),d.onOnce("process-error",function(a){f({error:a,file:pa(d)}),h()});var i=c.options;d.process(pb(mb(i.server.url,i.server.process,i.name,{chunkTransferId:d.transferId,chunkServer:i.server.patch,chunkUploads:i.chunkUploads,chunkForce:i.chunkForce,chunkSize:i.chunkSize,chunkRetryDelays:i.chunkRetryDelays})),function(c,e,f){wa("PREPARE_OUTPUT",c,{query:b,item:d}).then(function(b){a("DID_PREPARE_OUTPUT",{id:d.id,file:b}),e(b)})["catch"](f)})}}else c.processingQueue.push({id:d.id,success:e,failure:f})}),RETRY_ITEM_PROCESSING:Ab(c,function(b){a("REQUEST_ITEM_PROCESSING",{query:b})}),REQUEST_REMOVE_ITEM:Ab(c,function(c){yb(b("GET_BEFORE_REMOVE_FILE"),pa(c)).then(function(b){b&&a("REMOVE_ITEM",{query:c})})}),RELEASE_ITEM:Ab(c,function(a){a.release()}),REMOVE_ITEM:Ab(c,function(b,d){var e=function(){var e=b.id;tb(c.items,e).archive(),a("DID_REMOVE_ITEM",{error:null,id:e,item:b}),xb(a,c),d(pa(b))},f=c.options.server;b.origin===ra.LOCAL&&f&&W(f.remove)?(a("DID_START_ITEM_REMOVE",{id:b.id}),f.remove(b.source,function(){return e()},function(d){a("DID_THROW_ITEM_REMOVE_ERROR",{id:b.id,error:bb("error",0,d,null),status:{main:wb(c.options.labelFileRemoveError)(d),sub:c.options.labelTapToRetry}})})):e()}),ABORT_ITEM_LOAD:Ab(c,function(a){a.abortLoad()}),ABORT_ITEM_PROCESSING:Ab(c,function(b){b.serverId?a("REVERT_ITEM_PROCESSING",{id:b.id}):b.abortProcessing().then(function(){c.options.instantUpload&&a("REMOVE_ITEM",{query:b.id})})}),REQUEST_REVERT_ITEM_PROCESSING:Ab(c,function(d){if(c.options.instantUpload){var e=function(b){b&&a("REVERT_ITEM_PROCESSING",{query:d})},f=b("GET_BEFORE_REMOVE_FILE");if(!f)return e(!0);var g=f(pa(d));return null==g?e(!0):"boolean"==typeof g?e(g):void("function"==typeof g.then&&g.then(e))}a("REVERT_ITEM_PROCESSING",{query:d})}),REVERT_ITEM_PROCESSING:Ab(c,function(d){d.revert(nb(c.options.server.url,c.options.server.revert),b("GET_FORCE_REVERT")).then(function(){(c.options.instantUpload||function(a){return!rb(a.file)}(d))&&a("REMOVE_ITEM",{query:d.id})})["catch"](function(){})}),SET_OPTIONS:function(b){var c=b.options;h(c,function(b,c){a("SET_"+ca(b,"_").toUpperCase(),{value:c})})}}},Cb=function(a){return a},Db=function(a){return document.createElement(a)},Eb=function(a,b){var c=a.childNodes[0];c?b!==c.nodeValue&&(c.nodeValue=b):(c=document.createTextNode(b),a.appendChild(c))},Fb=function(a,b,c,d){var e=(d%360-90)*Math.PI/180;return{x:a+c*Math.cos(e),y:b+c*Math.sin(e)}},Gb=function(a,b,c,d,e){var f=1;return e>d&&e-d<=.5&&(f=0),d>e&&d-e>=.5&&(f=0),function(a,b,c,d,e,f){var g=Fb(a,b,c,e),h=Fb(a,b,c,d);return["M",g.x,g.y,"A",c,c,0,f,0,h.x,h.y].join(" ")}(a,b,c,360*Math.min(.9999,d),360*Math.min(.9999,e),f)},Hb=G({tag:"div",name:"progress-indicator",ignoreRectUpdate:!0,ignoreRect:!0,create:function(a){var b=a.root,c=a.props;c.spin=!1,c.progress=0,c.opacity=0;var d=m("svg");b.ref.path=m("path",{"stroke-width":2,"stroke-linecap":"round"}),d.appendChild(b.ref.path),b.ref.svg=d,b.appendChild(d)},write:function(a){var b=a.root,c=a.props;if(0!==c.opacity){c.align&&(b.element.dataset.align=c.align);var d=parseInt(j(b.ref.path,"stroke-width"),10),e=.5*b.rect.element.width,f=0,g=0;c.spin?(f=0,g=.5):(f=0,g=c.progress);var h=Gb(e,e,e-d,f,g);j(b.ref.path,"d",h),j(b.ref.path,"stroke-opacity",c.spin||c.progress>0?1:0)}},mixins:{apis:["progress","spin","align"],styles:["opacity"],animations:{opacity:{type:"tween",duration:500},progress:{type:"spring",stiffness:.95,damping:.65,mass:10}}}}),Ib=G({tag:"button",attributes:{type:"button"},ignoreRect:!0,ignoreRectUpdate:!0,name:"file-action-button",mixins:{apis:["label"],styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}},listeners:!0},create:function(a){var b=a.root,c=a.props;b.element.innerHTML=(c.icon||"")+"<span>"+c.label+"</span>",c.isDisabled=!1},write:function(a){var b=a.root,c=a.props,d=c.isDisabled,e=b.query("GET_DISABLED")||0===c.opacity;e&&!d?(c.isDisabled=!0,j(b.element,"disabled","disabled")):!e&&d&&(c.isDisabled=!1,b.element.removeAttribute("disabled"))}}),Jb=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:".";return(a=Math.round(Math.abs(a)))<1e3?a+" bytes":a<Lb?Math.floor(a/Kb)+" KB":a<Mb?Nb(a/Lb,1,b)+" MB":Nb(a/Mb,2,b)+" GB"},Kb=1e3,Lb=1e6,Mb=1e9,Nb=function(a,b,c){return a.toFixed(b).split(".").filter(function(a){return"0"!==a}).join(c)},Ob=function(a){var b=a.root,c=a.props;Eb(b.ref.fileSize,Jb(b.query("GET_ITEM_SIZE",c.id))),Eb(b.ref.fileName,Cb(b.query("GET_ITEM_NAME",c.id)))},Pb=function(a){var b=a.root,c=a.props;U(b.query("GET_ITEM_SIZE",c.id))||Eb(b.ref.fileSize,b.query("GET_LABEL_FILE_SIZE_NOT_AVAILABLE"))},Qb=G({name:"file-info",ignoreRect:!0,ignoreRectUpdate:!0,write:H({DID_LOAD_ITEM:Ob,DID_UPDATE_ITEM_META:Ob,DID_THROW_ITEM_LOAD_ERROR:Pb,DID_THROW_ITEM_INVALID:Pb}),didCreateView:function(a){xa("CREATE_VIEW",Object.assign({},a,{view:a}))},create:function(a){var b=a.root,c=a.props,d=Db("span");d.className="filepond--file-info-main",j(d,"aria-hidden","true"),b.appendChild(d),b.ref.fileName=d;var e=Db("span");e.className="filepond--file-info-sub",b.appendChild(e),b.ref.fileSize=e,Eb(e,b.query("GET_LABEL_FILE_WAITING_FOR_SIZE")),Eb(d,Cb(b.query("GET_ITEM_NAME",c.id)))},mixins:{styles:["translateX","translateY"],animations:{translateX:"spring",translateY:"spring"}}}),Rb=function(a){return Math.round(100*a)},Sb=function(a){var b=a.root,c=a.action,d=null===c.progress?b.query("GET_LABEL_FILE_LOADING"):b.query("GET_LABEL_FILE_LOADING")+" "+Rb(c.progress)+"%";Eb(b.ref.main,d),Eb(b.ref.sub,b.query("GET_LABEL_TAP_TO_CANCEL"))},Tb=function(a){var b=a.root;Eb(b.ref.main,""),Eb(b.ref.sub,"")},Ub=function(a){var b=a.root,c=a.action;Eb(b.ref.main,c.status.main),Eb(b.ref.sub,c.status.sub)},Vb=G({name:"file-status",ignoreRect:!0,ignoreRectUpdate:!0,write:H({DID_LOAD_ITEM:Tb,DID_REVERT_ITEM_PROCESSING:Tb,DID_REQUEST_ITEM_PROCESSING:function(a){var b=a.root;Eb(b.ref.main,b.query("GET_LABEL_FILE_PROCESSING")),Eb(b.ref.sub,b.query("GET_LABEL_TAP_TO_CANCEL"))},DID_ABORT_ITEM_PROCESSING:function(a){var b=a.root;Eb(b.ref.main,b.query("GET_LABEL_FILE_PROCESSING_ABORTED")),Eb(b.ref.sub,b.query("GET_LABEL_TAP_TO_RETRY"))},DID_COMPLETE_ITEM_PROCESSING:function(a){var b=a.root;Eb(b.ref.main,b.query("GET_LABEL_FILE_PROCESSING_COMPLETE")),Eb(b.ref.sub,b.query("GET_LABEL_TAP_TO_UNDO"))},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(a){var b=a.root,c=a.action,d=null===c.progress?b.query("GET_LABEL_FILE_PROCESSING"):b.query("GET_LABEL_FILE_PROCESSING")+" "+Rb(c.progress)+"%";Eb(b.ref.main,d),Eb(b.ref.sub,b.query("GET_LABEL_TAP_TO_CANCEL"))},DID_UPDATE_ITEM_LOAD_PROGRESS:Sb,DID_THROW_ITEM_LOAD_ERROR:Ub,DID_THROW_ITEM_INVALID:Ub,DID_THROW_ITEM_PROCESSING_ERROR:Ub,DID_THROW_ITEM_PROCESSING_REVERT_ERROR:Ub,DID_THROW_ITEM_REMOVE_ERROR:Ub}),didCreateView:function(a){xa("CREATE_VIEW",Object.assign({},a,{view:a}))},create:function(a){var b=a.root,c=(a.props,Db("span"));c.className="filepond--file-status-main",b.appendChild(c),b.ref.main=c;var d=Db("span");d.className="filepond--file-status-sub",b.appendChild(d),b.ref.sub=d,Sb({root:b,action:{progress:null}})},mixins:{styles:["translateX","translateY","opacity"],animations:{opacity:{type:"tween",duration:250},translateX:"spring",translateY:"spring"}}}),Wb={AbortItemLoad:{label:"GET_LABEL_BUTTON_ABORT_ITEM_LOAD",action:"ABORT_ITEM_LOAD",className:"filepond--action-abort-item-load",align:"LOAD_INDICATOR_POSITION"},RetryItemLoad:{label:"GET_LABEL_BUTTON_RETRY_ITEM_LOAD",action:"RETRY_ITEM_LOAD",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-load",align:"BUTTON_PROCESS_ITEM_POSITION"},RemoveItem:{label:"GET_LABEL_BUTTON_REMOVE_ITEM",action:"REQUEST_REMOVE_ITEM",icon:"GET_ICON_REMOVE",className:"filepond--action-remove-item",align:"BUTTON_REMOVE_ITEM_POSITION"},ProcessItem:{label:"GET_LABEL_BUTTON_PROCESS_ITEM",action:"REQUEST_ITEM_PROCESSING",icon:"GET_ICON_PROCESS",className:"filepond--action-process-item",align:"BUTTON_PROCESS_ITEM_POSITION"},AbortItemProcessing:{label:"GET_LABEL_BUTTON_ABORT_ITEM_PROCESSING",action:"ABORT_ITEM_PROCESSING",className:"filepond--action-abort-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RetryItemProcessing:{label:"GET_LABEL_BUTTON_RETRY_ITEM_PROCESSING",action:"RETRY_ITEM_PROCESSING",icon:"GET_ICON_RETRY",className:"filepond--action-retry-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"},RevertItemProcessing:{label:"GET_LABEL_BUTTON_UNDO_ITEM_PROCESSING",action:"REQUEST_REVERT_ITEM_PROCESSING",icon:"GET_ICON_UNDO",className:"filepond--action-revert-item-processing",align:"BUTTON_PROCESS_ITEM_POSITION"}},Xb=[];h(Wb,function(a){Xb.push(a)});var Yb,Zb=function(a){var b=a.ref.buttonRemoveItem.rect.element;return b.hidden?null:b.width+b.left},$b=function(a){return Math.floor(a.ref.buttonRemoveItem.rect.element.height/4)},_b=function(a){return Math.floor(a.ref.buttonRemoveItem.rect.element.left/2)},ac=function(a){return a.query("GET_STYLE_BUTTON_REMOVE_ITEM_POSITION");
},bc={buttonAbortItemLoad:{opacity:0},buttonRetryItemLoad:{opacity:0},buttonRemoveItem:{opacity:0},buttonProcessItem:{opacity:0},buttonAbortItemProcessing:{opacity:0},buttonRetryItemProcessing:{opacity:0},buttonRevertItemProcessing:{opacity:0},loadProgressIndicator:{opacity:0,align:function(a){return a.query("GET_STYLE_LOAD_INDICATOR_POSITION")}},processProgressIndicator:{opacity:0,align:function(a){return a.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}},processingCompleteIndicator:{opacity:0,scaleX:.75,scaleY:.75},info:{translateX:0,translateY:0,opacity:0},status:{translateX:0,translateY:0,opacity:0}},cc={buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Zb},status:{translateX:Zb}},dc={buttonAbortItemProcessing:{opacity:1},processProgressIndicator:{opacity:1},status:{opacity:1}},ec={DID_THROW_ITEM_INVALID:{buttonRemoveItem:{opacity:1},info:{translateX:Zb},status:{translateX:Zb,opacity:1}},DID_START_ITEM_LOAD:{buttonAbortItemLoad:{opacity:1},loadProgressIndicator:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_LOAD_ERROR:{buttonRetryItemLoad:{opacity:1},buttonRemoveItem:{opacity:1},info:{translateX:Zb},status:{opacity:1}},DID_START_ITEM_REMOVE:{processProgressIndicator:{opacity:1,align:ac},info:{translateX:Zb},status:{opacity:0}},DID_THROW_ITEM_REMOVE_ERROR:{processProgressIndicator:{opacity:0,align:ac},buttonRemoveItem:{opacity:1},info:{translateX:Zb},status:{opacity:1,translateX:Zb}},DID_LOAD_ITEM:cc,DID_LOAD_LOCAL_ITEM:{buttonRemoveItem:{opacity:1},info:{translateX:Zb},status:{translateX:Zb}},DID_START_ITEM_PROCESSING:dc,DID_REQUEST_ITEM_PROCESSING:dc,DID_UPDATE_ITEM_PROCESS_PROGRESS:dc,DID_COMPLETE_ITEM_PROCESSING:{buttonRevertItemProcessing:{opacity:1},info:{opacity:1},status:{opacity:1}},DID_THROW_ITEM_PROCESSING_ERROR:{buttonRemoveItem:{opacity:1},buttonRetryItemProcessing:{opacity:1},status:{opacity:1},info:{translateX:Zb}},DID_THROW_ITEM_PROCESSING_REVERT_ERROR:{buttonRevertItemProcessing:{opacity:1},status:{opacity:1},info:{opacity:1}},DID_ABORT_ITEM_PROCESSING:{buttonRemoveItem:{opacity:1},buttonProcessItem:{opacity:1},info:{translateX:Zb},status:{opacity:1}},DID_REVERT_ITEM_PROCESSING:cc},fc=G({create:function(a){var b=a.root;b.element.innerHTML=b.query("GET_ICON_DONE")},name:"processing-complete-indicator",ignoreRect:!0,mixins:{styles:["scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",opacity:{type:"tween",duration:250}}}}),gc=H({DID_SET_LABEL_BUTTON_ABORT_ITEM_PROCESSING:function(a){var b=a.root,c=a.action;b.ref.buttonAbortItemProcessing.label=c.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_LOAD:function(a){var b=a.root,c=a.action;b.ref.buttonAbortItemLoad.label=c.value},DID_SET_LABEL_BUTTON_ABORT_ITEM_REMOVAL:function(a){var b=a.root,c=a.action;b.ref.buttonAbortItemRemoval.label=c.value},DID_REQUEST_ITEM_PROCESSING:function(a){var b=a.root;b.ref.processProgressIndicator.spin=!0,b.ref.processProgressIndicator.progress=0},DID_START_ITEM_LOAD:function(a){var b=a.root;b.ref.loadProgressIndicator.spin=!0,b.ref.loadProgressIndicator.progress=0},DID_START_ITEM_REMOVE:function(a){var b=a.root;b.ref.processProgressIndicator.spin=!0,b.ref.processProgressIndicator.progress=0},DID_UPDATE_ITEM_LOAD_PROGRESS:function(a){var b=a.root,c=a.action;b.ref.loadProgressIndicator.spin=!1,b.ref.loadProgressIndicator.progress=c.progress},DID_UPDATE_ITEM_PROCESS_PROGRESS:function(a){var b=a.root,c=a.action;b.ref.processProgressIndicator.spin=!1,b.ref.processProgressIndicator.progress=c.progress}}),hc=G({create:function(a){var b=a.root,c=a.props.id,d=b.query("GET_ALLOW_REVERT"),e=b.query("GET_INSTANT_UPLOAD"),f=b.query("IS_ASYNC"),g=f?Xb.concat():Xb.filter(function(a){return!/Process/.test(a)});if(f&&!d){g.splice(-1,1);var i=ec.DID_COMPLETE_ITEM_PROCESSING;i.info.translateX=_b,i.info.translateY=$b,i.status.translateY=$b,i.processingCompleteIndicator={opacity:1,scaleX:1,scaleY:1}}e&&d&&(Wb.RevertItemProcessing.label="GET_LABEL_BUTTON_REMOVE_ITEM",Wb.RevertItemProcessing.icon="GET_ICON_REMOVE"),h(Wb,function(a,d){var e=b.createChildView(Ib,{label:b.query(d.label),icon:b.query(d.icon),opacity:0});g.includes(a)&&b.appendChildView(e),e.element.dataset.align=b.query("GET_STYLE_"+d.align),e.element.classList.add(d.className),e.on("click",function(a){a.stopPropagation(),b.dispatch(d.action,{query:c})}),b.ref["button"+a]=e}),b.ref.info=b.appendChildView(b.createChildView(Qb,{id:c})),b.ref.status=b.appendChildView(b.createChildView(Vb,{id:c})),b.ref.processingCompleteIndicator=b.appendChildView(b.createChildView(fc)),b.ref.processingCompleteIndicator.element.dataset.align=b.query("GET_STYLE_BUTTON_PROCESS_ITEM_POSITION");var j=b.appendChildView(b.createChildView(Hb,{opacity:0,align:b.query("GET_STYLE_LOAD_INDICATOR_POSITION")}));j.element.classList.add("filepond--load-indicator"),b.ref.loadProgressIndicator=j;var k=b.appendChildView(b.createChildView(Hb,{opacity:0,align:b.query("GET_STYLE_PROGRESS_INDICATOR_POSITION")}));k.element.classList.add("filepond--process-indicator"),b.ref.processProgressIndicator=k,b.ref.activeStyles=[]},write:function(a){var b=a.root,c=a.actions,d=a.props;gc({root:b,actions:c,props:d});var e=c.concat().filter(function(a){return/^DID_/.test(a.type)}).reverse().find(function(a){return ec[a.type]});if(e){b.ref.activeStyles=[];var f=ec[e.type];h(bc,function(a,c){var d=b.ref[a];h(c,function(c,e){var g=f[a]&&void 0!==f[a][c]?f[a][c]:e;b.ref.activeStyles.push({control:d,key:c,value:g})})})}b.ref.activeStyles.forEach(function(a){var c=a.control,d=a.key,e=a.value;c[d]="function"==typeof e?e(b):e})},didCreateView:function(a){xa("CREATE_VIEW",Object.assign({},a,{view:a}))},name:"file"}),ic=G({create:function(a){var b=a.root,c=a.props;b.ref.fileName=Db("legend"),b.appendChild(b.ref.fileName),b.ref.file=b.appendChildView(b.createChildView(hc,{id:c.id}));var d=Db("input");d.type="hidden",d.name=b.query("GET_NAME"),d.disabled=b.query("GET_DISABLED"),b.ref.data=d,b.appendChild(d)},ignoreRect:!0,write:H({DID_SET_DISABLED:function(a){var b=a.root;b.ref.data.disabled=b.query("GET_DISABLED")},DID_LOAD_ITEM:function(a){var b=a.root,c=a.action,d=a.props;b.ref.data.value=c.serverFileReference,Eb(b.ref.fileName,Cb(b.query("GET_ITEM_NAME",d.id)))},DID_REMOVE_ITEM:function(a){a.root.ref.data.removeAttribute("value")},DID_COMPLETE_ITEM_PROCESSING:function(a){var b=a.root,c=a.action;b.ref.data.value=c.serverFileReference},DID_REVERT_ITEM_PROCESSING:function(a){a.root.ref.data.removeAttribute("value")}}),didCreateView:function(a){xa("CREATE_VIEW",Object.assign({},a,{view:a}))},tag:"fieldset",name:"file-wrapper"}),jc={type:"spring",damping:.6,mass:7},kc=function(a,b,c){var d=G({name:"panel-"+b.name+" filepond--"+c,mixins:b.mixins,ignoreRectUpdate:!0}),e=a.createChildView(d,b.props);a.ref[b.name]=a.appendChildView(e)},lc=G({name:"panel",write:function(a){var b=a.root,c=a.props;if(null!==b.ref.scalable&&c.scalable===b.ref.scalable||(b.ref.scalable=!O(c.scalable)||c.scalable,b.element.dataset.scalable=b.ref.scalable),c.height){var d=b.ref.top.rect.element,e=b.ref.bottom.rect.element,f=Math.max(d.height+e.height,c.height);b.ref.center.translateY=d.height,b.ref.center.scaleY=(f-d.height-e.height)/100,b.ref.bottom.translateY=f-e.height}},create:function(a){var b=a.root,c=a.props;[{name:"top"},{name:"center",props:{translateY:null,scaleY:null},mixins:{animations:{scaleY:jc},styles:["translateY","scaleY"]}},{name:"bottom",props:{translateY:null},mixins:{animations:{translateY:jc},styles:["translateY"]}}].forEach(function(a){kc(b,a,c.name)}),b.element.classList.add("filepond--"+c.name),b.ref.scalable=null},ignoreRect:!0,mixins:{apis:["height","scalable"]}}),mc={type:"spring",stiffness:.75,damping:.45,mass:10},nc={DID_START_ITEM_LOAD:"busy",DID_UPDATE_ITEM_LOAD_PROGRESS:"loading",DID_THROW_ITEM_INVALID:"load-invalid",DID_THROW_ITEM_LOAD_ERROR:"load-error",DID_LOAD_ITEM:"idle",DID_THROW_ITEM_REMOVE_ERROR:"remove-error",DID_START_ITEM_REMOVE:"busy",DID_START_ITEM_PROCESSING:"busy",DID_REQUEST_ITEM_PROCESSING:"busy",DID_UPDATE_ITEM_PROCESS_PROGRESS:"processing",DID_COMPLETE_ITEM_PROCESSING:"processing-complete",DID_THROW_ITEM_PROCESSING_ERROR:"processing-error",DID_THROW_ITEM_PROCESSING_REVERT_ERROR:"processing-revert-error",DID_ABORT_ITEM_PROCESSING:"cancelled",DID_REVERT_ITEM_PROCESSING:"idle"},oc=H({DID_UPDATE_PANEL_HEIGHT:function(a){var b=a.root,c=a.action;b.height=c.height}}),pc=H({DID_GRAB_ITEM:function(a){var b=a.root;a.props.dragOrigin={x:b.translateX,y:b.translateY}},DID_DRAG_ITEM:function(a){a.root.element.dataset.dragState="drag"},DID_DROP_ITEM:function(a){var b=a.root,c=a.props;c.dragOffset=null,c.dragOrigin=null,b.element.dataset.dragState="drop"}},function(a){var b=a.root,c=a.actions,d=a.props,e=a.shouldOptimize;"drop"===b.element.dataset.dragState&&b.scaleX<=1&&(b.element.dataset.dragState="idle");var f=c.concat().filter(function(a){return/^DID_/.test(a.type)}).reverse().find(function(a){return nc[a.type]});f&&f.type!==d.currentState&&(d.currentState=f.type,b.element.dataset.filepondItemState=nc[d.currentState]||"");var g=b.query("GET_ITEM_PANEL_ASPECT_RATIO")||b.query("GET_PANEL_ASPECT_RATIO");g?e||(b.height=b.rect.element.width*g):(oc({root:b,actions:c,props:d}),!b.height&&b.ref.container.rect.element.height>0&&(b.height=b.ref.container.rect.element.height)),e&&(b.ref.panel.height=null),b.ref.panel.height=b.height}),qc=G({create:function(a){var b=a.root,c=a.props;b.ref.handleClick=function(a){return b.dispatch("DID_ACTIVATE_ITEM",{id:c.id})},b.element.id="filepond--item-"+c.id,b.element.addEventListener("click",b.ref.handleClick),b.ref.container=b.appendChildView(b.createChildView(ic,{id:c.id})),b.ref.panel=b.appendChildView(b.createChildView(lc,{name:"item-panel"})),b.ref.panel.height=null,c.markedForRemoval=!1,b.query("GET_ALLOW_REORDER")&&(b.element.dataset.dragState="idle",b.element.addEventListener("pointerdown",function(a){if(a.isPrimary){var d=!1,e=a.pageX,f=a.pageY;c.dragOrigin={x:b.translateX,y:b.translateY},c.dragCenter={x:a.offsetX,y:a.offsetY},b.dispatch("DID_GRAB_ITEM",{id:c.id});var g=function(a){a.isPrimary&&(a.stopPropagation(),a.preventDefault(),c.dragOffset={x:a.pageX-e,y:a.pageY-f},c.dragOffset.x*c.dragOffset.x+c.dragOffset.y*c.dragOffset.y>16&&!d&&(d=!0,b.element.removeEventListener("click",b.ref.handleClick)),b.dispatch("DID_DRAG_ITEM",{id:c.id}))};document.addEventListener("pointermove",g),document.addEventListener("pointerup",function h(a){a.isPrimary&&(document.removeEventListener("pointermove",g),document.removeEventListener("pointerup",h),c.dragOffset={x:a.pageX-e,y:a.pageY-f},b.dispatch("DID_DROP_ITEM",{id:c.id}),d&&setTimeout(function(){return b.element.addEventListener("click",b.ref.handleClick)},0))})}}))},write:pc,destroy:function(a){var b=a.root,c=a.props;b.element.removeEventListener("click",b.ref.handleClick),b.dispatch("RELEASE_ITEM",{query:c.id})},tag:"li",name:"item",mixins:{apis:["id","interactionMethod","markedForRemoval","spawnDate","dragCenter","dragOrigin","dragOffset"],styles:["translateX","translateY","scaleX","scaleY","opacity","height"],animations:{scaleX:"spring",scaleY:"spring",translateX:mc,translateY:mc,opacity:{type:"tween",duration:150}}}}),rc=function(a,b,c){if(c){var d=a.rect.element.width,e=b.length,f=null;if(0===e||c.top<b[0].rect.element.top)return-1;var g=b[0].rect.element,h=g.marginLeft+g.marginRight,i=g.width+h,j=Math.round(d/i);if(1===j){for(var k=0;k<e;k++){var l=b[k],m=l.rect.outer.top+.5*l.rect.element.height;if(c.top<m)return k}return e}for(var n=g.marginTop+g.marginBottom,o=g.height+n,p=0;p<e;p++){var q=p%j*i,r=Math.floor(p/j)*o,s=r-g.marginTop,t=q+i,u=r+o+g.marginBottom;if(c.top<u&&c.top>s){if(c.left<t)return p;f=p!==e-1?p:null}}return null!==f?f:e}},sc=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0,e=arguments.length>4&&void 0!==arguments[4]?arguments[4]:1;a.dragOffset?(a.translateX=null,a.translateY=null,a.translateX=a.dragOrigin.x+a.dragOffset.x,a.translateY=a.dragOrigin.y+a.dragOffset.y,a.scaleX=1.025,a.scaleY=1.025):(a.translateX=b,a.translateY=c,Date.now()>a.spawnDate&&(0===a.opacity&&tc(a,b,c,d,e),a.scaleX=1,a.scaleY=1,a.opacity=1))},tc=function(a,b,c,d,e){a.interactionMethod===ja?(a.translateX=null,a.translateX=b,a.translateY=null,a.translateY=c):a.interactionMethod===ga?(a.translateX=null,a.translateX=b-20*d,a.translateY=null,a.translateY=c-10*e,a.scaleX=.8,a.scaleY=.8):a.interactionMethod===ha?(a.translateY=null,a.translateY=c-30):a.interactionMethod===fa&&(a.translateX=null,a.translateX=b-30,a.translateY=null)},uc=function(a){return a.rect.element.height+.5*a.rect.element.marginBottom+.5*a.rect.element.marginTop},vc=H({DID_ADD_ITEM:function(a){var b=a.root,c=a.action,d=c.id,e=c.index,f=c.interactionMethod;b.ref.addIndex=e;var g=Date.now(),h=g,i=1;if(f!==ja){i=0;var j=b.query("GET_ITEM_INSERT_INTERVAL"),k=g-b.ref.lastItemSpanwDate;h=k<j?g+(j-k):g}b.ref.lastItemSpanwDate=h,b.appendChildView(b.createChildView(qc,{spawnDate:h,id:d,opacity:i,interactionMethod:f}),e)},DID_REMOVE_ITEM:function(a){var b=a.root,c=a.action.id,d=b.childViews.find(function(a){return a.id===c});d&&(d.scaleX=.9,d.scaleY=.9,d.opacity=0,d.markedForRemoval=!0)},DID_DRAG_ITEM:function(a){var b=a.root,c=a.action,d=(a.props,c.id),e=b.childViews.find(function(a){return a.id===d});if(e){for(var f=e.dragOrigin.y+e.dragOffset.y+e.dragCenter.y,g=b.query("GET_ACTIVE_ITEMS"),h=b.childViews.filter(function(a){return a.rect.element.height}),i=g.map(function(a){return h.find(function(b){return b.id===a.id})}),j=i.length,k=j-1,l=0,m=0,n=i.findIndex(function(a){return a===e}),o=uc(e),p=0;p<j;p++)if(f<(l=(m=l)+uc(i[p]))){if(n>p){if(f<m+o){k=p;break}continue}k=p;break}b.dispatch("MOVE_ITEM",{query:e,index:k}),n!==k&&b.dispatch("DID_REORDER_ITEMS",{items:b.query("GET_ACTIVE_ITEMS")})}}}),wc=G({create:function(a){var b=a.root;j(b.element,"role","list"),b.ref.lastItemSpanwDate=Date.now()},write:function(a){var b=a.root,c=a.props,d=a.actions,e=a.shouldOptimize;vc({root:b,props:c,actions:d});var f=c.dragCoordinates,g=b.rect.element.width,h=b.childViews.filter(function(a){return a.rect.element.height}),i=b.query("GET_ACTIVE_ITEMS").map(function(a){return h.find(function(b){return b.id===a.id})}).filter(function(a){return a}),j=f?rc(b,i,f):null,k=b.ref.addIndex||null;b.ref.addIndex=null;var l=0,m=0,n=0;if(0!==i.length){var o=i[0].rect.element,p=o.marginTop+o.marginBottom,q=o.marginLeft+o.marginRight,r=o.width+q,s=o.height+p,t=Math.round(g/r);if(1===t){var u=0,v=0;i.forEach(function(a,b){if(j){var c=b-j;v=-2===c?.25*-p:-1===c?.75*-p:0===c?.75*p:1===c?.25*p:0}e&&(a.translateX=null,a.translateY=null),a.markedForRemoval||sc(a,0,u+v);var d=(a.rect.element.height+p)*(a.markedForRemoval?a.opacity:1);u+=d})}else{var w=0,x=0;i.forEach(function(a,b){b===j&&(l=1),b===k&&(n+=1),a.markedForRemoval&&a.opacity<.5&&(m-=1);var c=b+n+l+m,d=c%t,f=Math.floor(c/t),g=d*r,h=f*s,i=Math.sign(g-w),o=Math.sign(h-x);w=g,x=h,a.markedForRemoval||(e&&(a.translateX=null,a.translateY=null),sc(a,g,h,i,o))})}}},tag:"ul",name:"list",didWriteView:function(a){var b=a.root;b.childViews.filter(function(a){return a.markedForRemoval&&0===a.opacity&&a.resting}).forEach(function(a){a._destroy(),b.removeChildView(a)})},filterFrameActionsForChild:function(a,b){return b.filter(function(b){return!b.data||!b.data.id||a.id===b.data.id})},mixins:{apis:["dragCoordinates"]}}),xc=H({DID_DRAG:function(a){var b=a.root,c=a.props,d=a.action;b.query("GET_ITEM_INSERT_LOCATION_FREEDOM")&&(c.dragCoordinates={left:d.position.scopeLeft-b.ref.list.rect.element.left,top:d.position.scopeTop-(b.rect.outer.top+b.rect.element.marginTop+b.rect.element.scrollTop)})},DID_END_DRAG:function(a){a.props.dragCoordinates=null}}),yc=G({create:function(a){var b=a.root,c=a.props;b.ref.list=b.appendChildView(b.createChildView(wc)),c.dragCoordinates=null,c.overflowing=!1},write:function(a){var b=a.root,c=a.props,d=a.actions;if(xc({root:b,props:c,actions:d}),b.ref.list.dragCoordinates=c.dragCoordinates,c.overflowing&&!c.overflow&&(c.overflowing=!1,b.element.dataset.state="",b.height=null),c.overflow){var e=Math.round(c.overflow);e!==b.height&&(c.overflowing=!0,b.element.dataset.state="overflow",b.height=e)}},name:"list-scroller",mixins:{apis:["overflow","dragCoordinates"],styles:["height","translateY"],animations:{translateY:"spring"}}}),zc=function(a,b,c){var d=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"";c?j(a,b,d):a.removeAttribute(b)},Ac=function(a){var b=a.root,c=(a.action,b.query("GET_DISABLED")),d=b.query("GET_ALLOW_BROWSE"),e=c||!d;zc(b.element,"disabled",e)},Bc=function(a){var b=a.root,c=b.element;b.query("GET_TOTAL_ITEMS")>0?(zc(c,"required",!1),zc(c,"name",!1)):(zc(c,"name",!0,b.query("GET_NAME")),b.query("GET_CHECK_VALIDITY")&&c.setCustomValidity(""),b.query("GET_REQUIRED")&&zc(c,"required",!0))},Cc=G({tag:"input",name:"browser",ignoreRect:!0,ignoreRectUpdate:!0,attributes:{type:"file"},create:function(a){var b=a.root,c=a.props;b.element.id="filepond--browser-"+c.id,j(b.element,"name",b.query("GET_NAME")),j(b.element,"aria-controls","filepond--assistant-"+c.id),j(b.element,"aria-labelledby","filepond--drop-label-"+c.id),b.ref.handleChange=function(a){if(b.element.value){var d=Array.from(b.element.files).map(function(a){return a._relativePath=a.webkitRelativePath,a});setTimeout(function(){c.onload(d),function(a){if(a&&""!==a.value){try{a.value=""}catch(a){}if(a.value){var b=Db("form"),c=a.parentNode,d=a.nextSibling;b.appendChild(a),b.reset(),d?c.insertBefore(a,d):c.appendChild(a)}}}(b.element)},250)}},b.element.addEventListener("change",b.ref.handleChange)},destroy:function(a){var b=a.root;b.element.removeEventListener("change",b.ref.handleChange)},write:H({DID_LOAD_ITEM:Bc,DID_REMOVE_ITEM:Bc,DID_THROW_ITEM_INVALID:function(a){var b=a.root;b.query("GET_CHECK_VALIDITY")&&b.element.setCustomValidity(b.query("GET_LABEL_INVALID_FIELD"))},DID_SET_DISABLED:Ac,DID_SET_ALLOW_BROWSE:Ac,DID_SET_ALLOW_DIRECTORIES_ONLY:function(a){var b=a.root,c=a.action;zc(b.element,"webkitdirectory",c.value)},DID_SET_ALLOW_MULTIPLE:function(a){var b=a.root,c=a.action;zc(b.element,"multiple",c.value)},DID_SET_ACCEPTED_FILE_TYPES:function(a){var b=a.root,c=a.action;zc(b.element,"accept",!!c.value,c.value?c.value.join(","):"")},DID_SET_CAPTURE_METHOD:function(a){var b=a.root,c=a.action;zc(b.element,"capture",!!c.value,!0===c.value?"":c.value)},DID_SET_REQUIRED:function(a){var b=a.root;a.action.value?0===b.query("GET_TOTAL_ITEMS")&&zc(b.element,"required",!0):zc(b.element,"required",!1)}})}),Dc=13,Ec=32,Fc=function(a,b){a.innerHTML=b;var c=a.querySelector(".filepond--label-action");return c&&j(c,"tabindex","0"),b},Gc=G({name:"drop-label",ignoreRect:!0,create:function(a){var b=a.root,c=a.props,d=Db("label");j(d,"for","filepond--browser-"+c.id),j(d,"id","filepond--drop-label-"+c.id),j(d,"aria-hidden","true"),b.ref.handleKeyDown=function(a){(a.keyCode===Dc||a.keyCode===Ec)&&(a.preventDefault(),b.ref.label.click())},b.ref.handleClick=function(a){a.target===d||d.contains(a.target)||b.ref.label.click()},d.addEventListener("keydown",b.ref.handleKeyDown),b.element.addEventListener("click",b.ref.handleClick),Fc(d,c.caption),b.appendChild(d),b.ref.label=d},destroy:function(a){var b=a.root;b.ref.label.addEventListener("keydown",b.ref.handleKeyDown),b.element.removeEventListener("click",b.ref.handleClick)},write:H({DID_SET_LABEL_IDLE:function(a){var b=a.root,c=a.action;Fc(b.ref.label,c.value)}}),mixins:{styles:["opacity","translateX","translateY"],animations:{opacity:{type:"tween",duration:150},translateX:"spring",translateY:"spring"}}}),Hc=G({name:"drip-blob",ignoreRect:!0,mixins:{styles:["translateX","translateY","scaleX","scaleY","opacity"],animations:{scaleX:"spring",scaleY:"spring",translateX:"spring",translateY:"spring",opacity:{type:"tween",duration:250}}}}),Ic=H({DID_DRAG:function(a){var b=a.root,c=a.action;b.ref.blob?(b.ref.blob.translateX=c.position.scopeLeft,b.ref.blob.translateY=c.position.scopeTop,b.ref.blob.scaleX=1,b.ref.blob.scaleY=1,b.ref.blob.opacity=1):function(a){var b=a.root,c=.5*b.rect.element.width,d=.5*b.rect.element.height;b.ref.blob=b.appendChildView(b.createChildView(Hc,{opacity:0,scaleX:2.5,scaleY:2.5,translateX:c,translateY:d}))}({root:b})},DID_DROP:function(a){var b=a.root;b.ref.blob&&(b.ref.blob.scaleX=2.5,b.ref.blob.scaleY=2.5,b.ref.blob.opacity=0)},DID_END_DRAG:function(a){var b=a.root;b.ref.blob&&(b.ref.blob.opacity=0)}}),Jc=G({ignoreRect:!0,ignoreRectUpdate:!0,name:"drip",write:function(a){var b=a.root,c=a.props,d=a.actions;Ic({root:b,props:c,actions:d});var e=b.ref.blob;0===d.length&&e&&0===e.opacity&&(b.removeChildView(e),b.ref.blob=null)}}),Kc=["jpg","jpeg","png","gif","bmp","webp","svg","tiff"],Lc=["css","csv","html","txt"],Mc={zip:"zip|compressed",epub:"application/epub+zip"},Nc=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return a=a.toLowerCase(),Kc.includes(a)?"image/"+("jpg"===a?"jpeg":"svg"===a?"svg+xml":a):Lc.includes(a)?"text/"+a:Mc[a]||""},Oc=function(a){return new Promise(function(b,c){var d=Yc(a);return d.length&&!Pc(a)?b(d):void Qc(a).then(b)})},Pc=function(a){return!!a.files&&a.files.length>0},Qc=function(a){return new Promise(function(b,c){var d=(a.items?Array.from(a.items):[]).filter(function(a){return Rc(a)}).map(function(a){return Sc(a)});d.length?Promise.all(d).then(function(a){var c=[];a.forEach(function(a){c.push.apply(c,a)}),b(c.filter(function(a){return a}).map(function(a){return a._relativePath||(a._relativePath=a.webkitRelativePath),a}))})["catch"](console.error):b(a.files?Array.from(a.files):[])})},Rc=function(a){if(Wc(a)){var b=Xc(a);if(b)return b.isFile||b.isDirectory}return"file"===a.kind},Sc=function(a){return new Promise(function(b,c){Vc(a)?Tc(Xc(a)).then(b)["catch"](c):b([a.getAsFile()])})},Tc=function(a){return new Promise(function(b,c){var d=[],e=0,f=0,g=function(){0===f&&0===e&&b(d)};!function h(a){e++;var b=a.createReader();!function i(){b.readEntries(function(a){return 0===a.length?(e--,void g()):(a.forEach(function(a){a.isDirectory?h(a):(f++,a.file(function(b){var c=Uc(b);a.fullPath&&(c._relativePath=a.fullPath),d.push(c),f--,g()}))}),void i())},c)}()}(a)})},Uc=function(a){if(a.type.length)return a;var b=a.lastModifiedDate,c=a.name;return(a=a.slice(0,a.size,Nc(Pa(a.name)))).name=c,a.lastModifiedDate=b,a},Vc=function(a){return Wc(a)&&(Xc(a)||{}).isDirectory},Wc=function(a){return"webkitGetAsEntry"in a},Xc=function(a){return a.webkitGetAsEntry()},Yc=function(a){var b=[];try{if((b=$c(a)).length)return b;b=Zc(a)}catch(a){}return b},Zc=function(a){var b=a.getData("url");return"string"==typeof b&&b.length?[b]:[]},$c=function(a){var b=a.getData("text/html");if("string"==typeof b&&b.length){var c=b.match(/src\s*=\s*"(.+?)"/);if(c)return[c[1]]}return[]},_c=[],ad=function(a){return{pageLeft:a.pageX,pageTop:a.pageY,scopeLeft:a.offsetX||a.layerX,scopeTop:a.offsetY||a.layerY}},bd=function(a){var b=_c.find(function(b){return b.element===a});if(b)return b;var c=cd(a);return _c.push(c),c},cd=function(a){var b=[],c={dragenter:gd,dragover:hd,dragleave:jd,drop:id},d={};h(c,function(c,e){d[c]=e(a,b),a.addEventListener(c,d[c],!1)});var e={element:a,addListener:function(f){return b.push(f),function(){b.splice(b.indexOf(f),1),0===b.length&&(_c.splice(_c.indexOf(e),1),h(c,function(b){a.removeEventListener(b,d[b],!1)}))}}};return e},dd=function(a,b){var c,d=function(a,b){return"elementFromPoint"in a||(a=document),a.elementFromPoint(b.x,b.y)}("getRootNode"in(c=b)?c.getRootNode():document,{x:a.pageX-window.pageXOffset,y:a.pageY-window.pageYOffset});return d===b||b.contains(d)},ed=null,fd=function(a,b){try{a.dropEffect=b}catch(a){}},gd=function(a,b){return function(a){a.preventDefault(),ed=a.target,b.forEach(function(b){var c=b.element,d=b.onenter;dd(a,c)&&(b.state="enter",d(ad(a)))})}},hd=function(a,b){return function(a){a.preventDefault();var c=a.dataTransfer;Oc(c).then(function(d){var e=!1;b.some(function(b){var f=b.filterElement,g=b.element,h=b.onenter,i=b.onexit,j=b.ondrag,k=b.allowdrop;fd(c,"copy");var l=k(d);if(l)if(dd(a,g)){if(e=!0,null===b.state)return b.state="enter",void h(ad(a));if(b.state="over",f&&!l)return void fd(c,"none");j(ad(a))}else f&&!e&&fd(c,"none"),b.state&&(b.state=null,i(ad(a)));else fd(c,"none")})})}},id=function(a,b){return function(a){a.preventDefault();var c=a.dataTransfer;Oc(c).then(function(c){b.forEach(function(b){var d=b.filterElement,e=b.element,f=b.ondrop,g=b.onexit,h=b.allowdrop;if(b.state=null,!d||dd(a,e))return h(c)?void f(ad(a),c):g(ad(a))})})}},jd=function(a,b){return function(a){ed===a.target&&b.forEach(function(b){var c=b.onexit;b.state=null,c(ad(a))})}},kd=function(a,b,c){a.classList.add("filepond--hopper");var d=c.catchesDropsOnPage,e=c.requiresDropOnElement,f=c.filterItems,g=void 0===f?function(a){return a}:f,h=function(a,b,c){var d=bd(b),e={element:a,filterElement:c,state:null,ondrop:function(){},onenter:function(){},ondrag:function(){},onexit:function(){},onload:function(){},allowdrop:function(){}};return e.destroy=d.addListener(e),e}(a,d?document.documentElement:a,e),i="",j="";h.allowdrop=function(a){return b(g(a))},h.ondrop=function(a,c){var d=g(c);b(d)?(j="drag-drop",k.onload(d,a)):k.ondragend(a)},h.ondrag=function(a){k.ondrag(a)},h.onenter=function(a){j="drag-over",k.ondragstart(a)},h.onexit=function(a){j="drag-exit",k.ondragend(a)};var k={updateHopperState:function(){i!==j&&(a.dataset.hopperState=j,i=j)},onload:function(){},ondragstart:function(){},ondrag:function(){},ondragend:function(){},destroy:function(){h.destroy()}};return k},ld=!1,md=[],nd=function(a){Oc(a.clipboardData).then(function(a){a.length&&md.forEach(function(b){return b(a)})})},od=function(){var a=function(a){b.onload(a)},b={destroy:function(){var b;b=a,la(md,md.indexOf(b)),0===md.length&&(document.removeEventListener("paste",nd),ld=!1)},onload:function(){}};return function(a){md.includes(a)||(md.push(a),ld||(ld=!0,document.addEventListener("paste",nd)))}(a),b},pd=null,qd=null,rd=[],sd=function(a,b){a.element.textContent=b},td=function(a,b,c){var d=a.query("GET_TOTAL_ITEMS");sd(a,c+" "+b+", "+d+" "+(1===d?a.query("GET_LABEL_FILE_COUNT_SINGULAR"):a.query("GET_LABEL_FILE_COUNT_PLURAL"))),clearTimeout(qd),qd=setTimeout(function(){!function(a){a.element.textContent=""}(a)},1500)},ud=function(a){return a.element.parentNode.contains(document.activeElement)},vd=function(a){var b=a.root,c=a.action,d=b.query("GET_ITEM",c.id).filename,e=b.query("GET_LABEL_FILE_PROCESSING_ABORTED");sd(b,d+" "+e)},wd=function(a){var b=a.root,c=a.action,d=b.query("GET_ITEM",c.id).filename;sd(b,c.status.main+" "+d+" "+c.status.sub)},xd=G({create:function(a){var b=a.root,c=a.props;b.element.id="filepond--assistant-"+c.id,j(b.element,"role","status"),j(b.element,"aria-live","polite"),j(b.element,"aria-relevant","additions")},ignoreRect:!0,ignoreRectUpdate:!0,write:H({DID_LOAD_ITEM:function(a){var b=a.root,c=a.action;if(ud(b)){b.element.textContent="";var d=b.query("GET_ITEM",c.id);rd.push(d.filename),clearTimeout(pd),pd=setTimeout(function(){td(b,rd.join(", "),b.query("GET_LABEL_FILE_ADDED")),rd.length=0},750)}},DID_REMOVE_ITEM:function(a){var b=a.root,c=a.action;if(ud(b)){var d=c.item;td(b,d.filename,b.query("GET_LABEL_FILE_REMOVED"))}},DID_COMPLETE_ITEM_PROCESSING:function(a){var b=a.root,c=a.action,d=b.query("GET_ITEM",c.id).filename,e=b.query("GET_LABEL_FILE_PROCESSING_COMPLETE");sd(b,d+" "+e)},DID_ABORT_ITEM_PROCESSING:vd,DID_REVERT_ITEM_PROCESSING:vd,DID_THROW_ITEM_REMOVE_ERROR:wd,DID_THROW_ITEM_LOAD_ERROR:wd,DID_THROW_ITEM_INVALID:wd,DID_THROW_ITEM_PROCESSING_ERROR:wd}),tag:"span",name:"assistant"}),yd=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return a.replace(new RegExp(b+".","g"),function(a){return a.charAt(1).toUpperCase()})},zd=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:16,c=!(arguments.length>2&&void 0!==arguments[2])||arguments[2],d=Date.now(),e=null;return function(){for(var f=arguments.length,g=new Array(f),h=0;h<f;h++)g[h]=arguments[h];clearTimeout(e);var i=Date.now()-d,j=function(){d=Date.now(),a.apply(void 0,g)};i<b?c||(e=setTimeout(j,b-i)):j()}},Ad=function(a){return a.preventDefault()},Bd=function(a){var b=a.ref.list.childViews[0].childViews[0];return b?{top:b.rect.element.marginTop,bottom:b.rect.element.marginBottom}:{top:0,bottom:0}},Cd=function(a){var b=0,c=0,d=a.ref.list,e=d.childViews[0],f=e.childViews.filter(function(a){return a.rect.element.height}),g=a.query("GET_ACTIVE_ITEMS").map(function(a){return f.find(function(b){return b.id===a.id})}).filter(function(a){return a});if(0===g.length)return{visual:b,bounds:c};var h=e.rect.element.width,i=rc(e,g,d.dragCoordinates),j=g[0].rect.element,k=j.marginTop+j.marginBottom,l=j.marginLeft+j.marginRight,m=j.width+l,n=j.height+k,o=void 0!==i&&i>=0?1:0,p=g.find(function(a){return a.markedForRemoval&&a.opacity<.45})?-1:0,q=g.length+o+p,r=Math.round(h/m);return 1===r?g.forEach(function(a){var d=a.rect.element.height+k;c+=d,b+=d*a.opacity}):(c=Math.ceil(q/r)*n,b=c),{visual:b,bounds:c}},Dd=function(a){var b=a.ref.measureHeight||null;return{cappedHeight:parseInt(a.style.maxHeight,10)||null,fixedHeight:0===b?null:b}},Ed=function(a,b){var c=a.query("GET_ALLOW_REPLACE"),d=a.query("GET_ALLOW_MULTIPLE"),e=a.query("GET_TOTAL_ITEMS"),f=a.query("GET_MAX_FILES"),g=b.length;return!d&&g>1||!!(U(f=d?f:c?f:1)&&e+g>f)&&(a.dispatch("DID_THROW_MAX_FILES",{source:b,error:bb("warning",0,"Max files")}),!0)},Fd=function(a,b,c){var d=a.childViews[0];return rc(d,b,{left:c.scopeLeft-d.rect.element.left,top:c.scopeTop-(a.rect.outer.top+a.rect.element.marginTop+a.rect.element.scrollTop)})},Gd=function(a){var b=a.query("GET_ALLOW_DROP"),c=a.query("GET_DISABLED"),d=b&&!c;if(d&&!a.ref.hopper){var e=kd(a.element,function(b){if(Ed(a,b))return!1;var c=a.query("GET_BEFORE_DROP_FILE")||function(){return!0};return!a.query("GET_DROP_VALIDATION")||b.every(function(b){return xa("ALLOW_HOPPER_ITEM",b,{query:a.query}).every(function(a){return!0===a})&&c(b)})},{filterItems:function(b){var c=a.query("GET_IGNORED_FILES");return b.filter(function(a){return!rb(a)||!c.includes(a.name.toLowerCase())})},catchesDropsOnPage:a.query("GET_DROP_ON_PAGE"),requiresDropOnElement:a.query("GET_DROP_ON_ELEMENT")});e.onload=function(b,c){var d=a.ref.list.childViews[0].childViews.filter(function(a){return a.rect.element.height}),e=a.query("GET_ACTIVE_ITEMS").map(function(a){return d.find(function(b){return b.id===a.id})}).filter(function(a){return a});a.dispatch("ADD_ITEMS",{items:b,index:Fd(a.ref.list,e,c),interactionMethod:ga}),a.dispatch("DID_DROP",{position:c}),a.dispatch("DID_END_DRAG",{position:c})},e.ondragstart=function(b){a.dispatch("DID_START_DRAG",{position:b})},e.ondrag=zd(function(b){a.dispatch("DID_DRAG",{position:b})}),e.ondragend=function(b){a.dispatch("DID_END_DRAG",{position:b})},a.ref.hopper=e,a.ref.drip=a.appendChildView(a.createChildView(Jc))}else!d&&a.ref.hopper&&(a.ref.hopper.destroy(),a.ref.hopper=null,a.removeChildView(a.ref.drip))},Hd=function(a,b){var c=a.query("GET_ALLOW_BROWSE"),d=a.query("GET_DISABLED"),e=c&&!d;e&&!a.ref.browser?a.ref.browser=a.appendChildView(a.createChildView(Cc,Object.assign({},b,{onload:function(b){return!Ed(a,b)&&void a.dispatch("ADD_ITEMS",{items:b,index:-1,interactionMethod:ha})}})),0):!e&&a.ref.browser&&(a.removeChildView(a.ref.browser),a.ref.browser=null)},Id=function(a){var b=a.query("GET_ALLOW_PASTE"),c=a.query("GET_DISABLED"),d=b&&!c;d&&!a.ref.paster?(a.ref.paster=od(),a.ref.paster.onload=function(b){a.dispatch("ADD_ITEMS",{items:b,index:-1,interactionMethod:ia})}):!d&&a.ref.paster&&(a.ref.paster.destroy(),a.ref.paster=null)},Jd=H({DID_SET_ALLOW_BROWSE:function(a){var b=a.root,c=a.props;Hd(b,c)},DID_SET_ALLOW_DROP:function(a){var b=a.root;Gd(b)},DID_SET_ALLOW_PASTE:function(a){var b=a.root;Id(b)},DID_SET_DISABLED:function(a){var b=a.root,c=a.props;Gd(b),Id(b),Hd(b,c),b.query("GET_DISABLED")?b.element.dataset.disabled="disabled":b.element.removeAttribute("data-disabled")}}),Kd=G({name:"root",read:function(a){var b=a.root;b.ref.measure&&(b.ref.measureHeight=b.ref.measure.offsetHeight)},create:function(a){var b=a.root,c=a.props,d=b.query("GET_ID");
d&&(b.element.id=d);var e=b.query("GET_CLASS_NAME");e&&e.split(" ").filter(function(a){return a.length}).forEach(function(a){b.element.classList.add(a)}),b.ref.label=b.appendChildView(b.createChildView(Gc,Object.assign({},c,{translateY:null,caption:b.query("GET_LABEL_IDLE")}))),b.ref.list=b.appendChildView(b.createChildView(yc,{translateY:null})),b.ref.panel=b.appendChildView(b.createChildView(lc,{name:"panel-root"})),b.ref.assistant=b.appendChildView(b.createChildView(xd,Object.assign({},c))),b.ref.measure=Db("div"),b.ref.measure.style.height="100%",b.element.appendChild(b.ref.measure),b.ref.bounds=null,b.query("GET_STYLES").filter(function(a){return!L(a.value)}).map(function(a){var c=a.name,d=a.value;b.element.dataset[c]=d}),b.ref.widthPrevious=null,b.ref.widthUpdated=zd(function(){b.ref.updateHistory=[],b.dispatch("DID_RESIZE_ROOT")},250),b.ref.previousAspectRatio=null,b.ref.updateHistory=[];var f=window.matchMedia("(pointer: fine) and (hover: hover)").matches,g="PointerEvent"in window;b.query("GET_ALLOW_REORDER")&&g&&!f&&(b.element.addEventListener("touchmove",Ad,{passive:!1}),b.element.addEventListener("gesturestart",Ad))},write:function(a){var b=a.root,c=a.props,d=a.actions;if(Jd({root:b,props:c,actions:d}),d.filter(function(a){return/^DID_SET_STYLE_/.test(a.type)}).filter(function(a){return!L(a.data.value)}).map(function(a){var c=a.type,d=a.data,e=yd(c.substr(8).toLowerCase(),"_");b.element.dataset[e]=d.value,b.invalidateLayout()}),!b.rect.element.hidden){b.rect.element.width!==b.ref.widthPrevious&&(b.ref.widthPrevious=b.rect.element.width,b.ref.widthUpdated());var e=b.ref.bounds;e||(e=b.ref.bounds=Dd(b),b.element.removeChild(b.ref.measure),b.ref.measure=null);var f=b.ref,g=f.hopper,h=f.label,i=f.list,j=f.panel;g&&g.updateHopperState();var k=b.query("GET_PANEL_ASPECT_RATIO"),l=b.query("GET_ALLOW_MULTIPLE"),m=b.query("GET_TOTAL_ITEMS"),n=m===(l?b.query("GET_MAX_FILES")||1e6:1),o=d.find(function(a){return"DID_ADD_ITEM"===a.type});if(n&&o){var p=o.data.interactionMethod;h.opacity=0,l?h.translateY=-40:p===fa?h.translateX=40:h.translateY=p===ha?40:30}else n||(h.opacity=1,h.translateX=0,h.translateY=0);var q=Bd(b),r=Cd(b),s=h.rect.element.height,t=!l||n?0:s,u=n?i.rect.element.marginTop:0,v=0===m?0:i.rect.element.marginBottom,w=t+u+r.visual+v,x=t+u+r.bounds+v;if(i.translateY=Math.max(0,t-i.rect.element.marginTop)-q.top,k){var y=b.rect.element.width,z=y*k;k!==b.ref.previousAspectRatio&&(b.ref.previousAspectRatio=k,b.ref.updateHistory=[]);var A=b.ref.updateHistory;if(A.push(y),A.length>4)for(var B=A.length,C=B-10,D=0,E=B;E>=C;E--)if(A[E]===A[E-2]&&D++,D>=2)return;j.scalable=!1,j.height=z;var F=z-t-(v-q.bottom)-(n?u:0);r.visual>F?i.overflow=F:i.overflow=null,b.height=z}else if(e.fixedHeight){j.scalable=!1;var G=e.fixedHeight-t-(v-q.bottom)-(n?u:0);r.visual>G?i.overflow=G:i.overflow=null}else if(e.cappedHeight){var H=w>=e.cappedHeight,I=Math.min(e.cappedHeight,w);j.scalable=!0,j.height=H?I:I-q.top-q.bottom;var J=I-t-(v-q.bottom)-(n?u:0);w>e.cappedHeight&&r.visual>J?i.overflow=J:i.overflow=null,b.height=Math.min(e.cappedHeight,x-q.top-q.bottom)}else{var K=m>0?q.top+q.bottom:0;j.scalable=!0,j.height=Math.max(s,w-K),b.height=Math.max(s,x-K)}}},destroy:function(a){var b=a.root;b.ref.paster&&b.ref.paster.destroy(),b.ref.hopper&&b.ref.hopper.destroy(),b.element.removeEventListener("touchmove",Ad),b.element.removeEventListener("gesturestart",Ad)},mixins:{styles:["height"]}}),Ld=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b=null,c=za(),d=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],d=Object.assign({},a),e=[],f=[],g=function(a,b,c){c?f.push({type:a,data:b}):(k[a]&&k[a](b),e.push({type:a,data:b}))},h=function(a){for(var b,c=arguments.length,d=new Array(c>1?c-1:0),e=1;e<c;e++)d[e-1]=arguments[e];return j[a]?(b=j)[a].apply(b,d):null},i={getState:function(){return Object.assign({},d)},processActionQueue:function(){var a=[].concat(e);return e.length=0,a},processDispatchQueue:function(){var a=[].concat(f);f.length=0,a.forEach(function(a){var b=a.type,c=a.data;g(b,c)})},dispatch:g,query:h},j={};b.forEach(function(a){j=Object.assign({},a(d),{},j)});var k={};return c.forEach(function(a){k=Object.assign({},a(g,h,d),{},k)}),i}({items:[],listUpdateTimeout:null,itemUpdateTimeout:null,processingQueue:[],options:ba(c)},[La,ea(c)],[Bb,da(c)]);d.dispatch("SET_OPTIONS",{options:a});var e=function(){document.hidden||d.dispatch("KICK")};document.addEventListener("visibilitychange",e);var f=null,g=!1,j=!1,k=null,l=null,m=function(){g||(g=!0),clearTimeout(f),f=setTimeout(function(){g=!1,k=null,l=null,j&&(j=!1,d.dispatch("DID_STOP_RESIZE"))},500)};window.addEventListener("resize",m);var n=Kd(d,{id:ka()}),o=!1,p=!1,q={_read:function(){g&&(l=window.innerWidth,k||(k=l),j||l===k||(d.dispatch("DID_START_RESIZE"),j=!0)),p&&o&&(o=null===n.element.offsetParent),o||(n._read(),p=n.rect.element.hidden)},_write:function(a){var b,c=d.processActionQueue().filter(function(a){return!/^SET_/.test(a.type)});o&&!c.length||(t(c),o=n._write(a,c,j),(b=d.query("GET_ITEMS")).forEach(function(a,c){a.released&&la(b,c)}),o&&d.processDispatchQueue())}},r=function(a){return function(b){var c={type:a};if(!b)return c;if(b.hasOwnProperty("error")&&(c.error=b.error?Object.assign({},b.error):null),b.status&&(c.status=Object.assign({},b.status)),b.file&&(c.output=b.file),b.source)c.file=b.source;else if(b.item||b.id){var e=b.item?b.item:d.query("GET_ITEM",b.id);c.file=e?pa(e):null}return b.items&&(c.items=b.items.map(pa)),/progress/.test(a)&&(c.progress=b.progress),c}},s={DID_DESTROY:r("destroy"),DID_INIT:r("init"),DID_THROW_MAX_FILES:r("warning"),DID_START_ITEM_LOAD:r("addfilestart"),DID_UPDATE_ITEM_LOAD_PROGRESS:r("addfileprogress"),DID_LOAD_ITEM:r("addfile"),DID_THROW_ITEM_INVALID:[r("error"),r("addfile")],DID_THROW_ITEM_LOAD_ERROR:[r("error"),r("addfile")],DID_THROW_ITEM_REMOVE_ERROR:[r("error"),r("removefile")],DID_PREPARE_OUTPUT:r("preparefile"),DID_START_ITEM_PROCESSING:r("processfilestart"),DID_UPDATE_ITEM_PROCESS_PROGRESS:r("processfileprogress"),DID_ABORT_ITEM_PROCESSING:r("processfileabort"),DID_COMPLETE_ITEM_PROCESSING:r("processfile"),DID_COMPLETE_ITEM_PROCESSING_ALL:r("processfiles"),DID_REVERT_ITEM_PROCESSING:r("processfilerevert"),DID_THROW_ITEM_PROCESSING_ERROR:[r("error"),r("processfile")],DID_REMOVE_ITEM:r("removefile"),DID_UPDATE_ITEMS:r("updatefiles"),DID_ACTIVATE_ITEM:r("activatefile"),DID_REORDER_ITEMS:r("reorderfiles")},t=function(a){a.length&&a.forEach(function(a){if(s[a.type]){var b=s[a.type];(Array.isArray(b)?b:[b]).forEach(function(b){setTimeout(function(){!function(a){var b=Object.assign({pond:A},a);delete b.type,n.element.dispatchEvent(new CustomEvent("FilePond:"+a.type,{detail:b,bubbles:!0,cancelable:!0,composed:!0}));var c=[];a.hasOwnProperty("error")&&c.push(a.error),a.hasOwnProperty("file")&&c.push(a.file);var e=["type","error","file"];Object.keys(a).filter(function(a){return!e.includes(a)}).forEach(function(b){return c.push(a[b])}),A.fire.apply(A,[a.type].concat(c));var f=d.query("GET_ON"+a.type.toUpperCase());f&&f.apply(void 0,c)}(b(a.data))},0)})}})},u=function(a){return new Promise(function(b,c){d.dispatch("REQUEST_ITEM_PREPARE",{query:a,success:function(a){b(a)},failure:function(a){c(a)}})})},w=function(a){return d.dispatch("REMOVE_ITEM",{query:a}),null===d.query("GET_ACTIVE_ITEM",a)},x=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];return new Promise(function(a,c){var e=[],f={};if(K(b[0]))e.push.apply(e,b[0]),Object.assign(f,b[1]||{});else{var g=b[b.length-1];"object"!=typeof g||g instanceof Blob||Object.assign(f,b.pop()),e.push.apply(e,b)}d.dispatch("ADD_ITEMS",{items:e,index:f.index,interactionMethod:fa,success:a,failure:c})})},y=function(){return d.query("GET_ACTIVE_ITEMS")},z=function(a){return new Promise(function(b,c){d.dispatch("REQUEST_ITEM_PROCESSING",{query:a,success:function(a){b(a)},failure:function(a){c(a)}})})},A=Object.assign({},ma(),{},q,{},function(a,b){var c={};return h(b,function(b){c[b]={get:function(){return a.getState().options[b]},set:function(c){a.dispatch("SET_"+ca(b,"_").toUpperCase(),{value:c})}}}),c}(d,c),{setOptions:function(a){return d.dispatch("SET_OPTIONS",{options:a})},addFile:function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return new Promise(function(c,d){x([{source:a,options:b}],{index:b.index}).then(function(a){return c(a&&a[0])})["catch"](d)})},addFiles:x,getFile:function(a){return d.query("GET_ACTIVE_ITEM",a)},processFile:z,prepareFile:u,removeFile:w,moveFile:function(a,b){return d.dispatch("MOVE_ITEM",{query:a,index:b})},getFiles:y,processFiles:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=Array.isArray(b[0])?b[0]:b;if(!d.length){var e=y().filter(function(a){return!(a.status===qa.IDLE&&a.origin===ra.LOCAL)&&a.status!==qa.PROCESSING&&a.status!==qa.PROCESSING_COMPLETE&&a.status!==qa.PROCESSING_REVERT_ERROR});return Promise.all(e.map(z))}return Promise.all(d.map(z))},removeFiles:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=Array.isArray(b[0])?b[0]:b,e=y();return d.length?d.map(function(a){return v(a)?e[a]?e[a].id:null:a}).filter(function(a){return a}).map(w):Promise.all(e.map(w))},prepareFiles:function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];var d=Array.isArray(b[0])?b[0]:b,e=d.length?d:y();return Promise.all(e.map(u))},sort:function(a){return d.dispatch("SORT",{compare:a})},browse:function(){var a=n.element.querySelector("input[type=file]");a&&a.click()},destroy:function(){A.fire("destroy",n.element),d.dispatch("ABORT_ALL"),n._destroy(),window.removeEventListener("resize",m),document.removeEventListener("visibilitychange",e),d.dispatch("DID_DESTROY")},insertBefore:function(a){return I(n.element,a)},insertAfter:function(a){return J(n.element,a)},appendTo:function(a){return a.appendChild(n.element)},replaceElement:function(a){I(n.element,a),a.parentNode.removeChild(a),b=a},restoreElement:function(){b&&(J(b,n.element),n.element.parentNode.removeChild(n.element),b=null)},isAttachedTo:function(a){return n.element===a||b===a},element:{get:function(){return n.element}},status:{get:function(){return d.query("GET_STATUS")}}});return d.dispatch("DID_INIT"),i(A)},Md=function(){var a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},b={};return h(za(),function(a,c){b[a]=c[0]}),Ld(Object.assign({},b,{},a))},Nd=function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c=[];h(a.attributes,function(b){c.push(a.attributes[b])});var d=c.filter(function(a){return a.name}).reduce(function(b,c){var d,e=j(a,c.name);return b[(d=c.name,yd(d.replace(/^data-/,"")))]=e===c.name||e,b},{});return function e(a,b){h(b,function(b,c){h(a,function(d,e){var f=new RegExp(b);if(f.test(d)&&(delete a[d],!1!==c))if(Q(c))a[c]=e;else{var g,h=c.group;Z(c)&&!a[h]&&(a[h]={}),a[h][(g=d.replace(f,""),g.charAt(0).toLowerCase()+g.slice(1))]=e}}),c.mapping&&e(a[c.group],c.mapping)})}(d,b),d},Od=function(){return(arguments.length<=0?void 0:arguments[0])instanceof HTMLElement?function(a){var b=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},c={"^class$":"className","^multiple$":"allowMultiple","^capture$":"captureMethod","^webkitdirectory$":"allowDirectoriesOnly","^server":{group:"server",mapping:{"^process":{group:"process"},"^revert":{group:"revert"},"^fetch":{group:"fetch"},"^restore":{group:"restore"},"^load":{group:"load"}}},"^type$":!1,"^files$":!1};xa("SET_ATTRIBUTE_TO_OPTION_MAP",c);var d=Object.assign({},b),e=Nd("FIELDSET"===a.nodeName?a.querySelector("input[type=file]"):a,c);Object.keys(e).forEach(function(a){Z(e[a])?(Z(d[a])||(d[a]={}),Object.assign(d[a],e[a])):d[a]=e[a]}),d.files=(b.files||[]).concat(Array.from(a.querySelectorAll("input:not([type=file])")).map(function(a){return{source:a.value,options:{type:a.dataset.type}}}));var f=Md(d);return a.files&&Array.from(a.files).forEach(function(a){f.addFile(a)}),f.replaceElement(a),f}.apply(void 0,arguments):Md.apply(void 0,arguments)},Pd=["fire","_read","_write"],Qd=function(a){var b={};return na(a,b,Pd),b},Rd=function(a,b){return a.replace(/(?:{([a-zA-Z]+)})/g,function(a,c){return b[c]})},Sd=function(a){var b=new Blob(["(",a.toString(),")()"],{type:"application/javascript"}),c=URL.createObjectURL(b),d=new Worker(c);return{transfer:function(a,b){},post:function(a,b,c){var e=ka();d.onmessage=function(a){a.data.id===e&&b(a.data.message)},d.postMessage({id:e,message:a},c)},terminate:function(){d.terminate(),URL.revokeObjectURL(c)}}},Td=function(a){return new Promise(function(b,c){var d=new Image;d.onload=function(){b(d)},d.onerror=function(a){c(a)},d.src=a})},Ud=function(a,b){var c=a.slice(0,a.size,a.type);return c.lastModifiedDate=a.lastModifiedDate,c.name=b,c},Vd=function(a){return Ud(a,a.name)},Wd=[],Xd=function(a){if(!Wd.includes(a)){Wd.push(a);var b,c=a({addFilter:ya,utils:{Type:ua,forin:h,isString:Q,isFile:rb,toNaturalFileSize:Jb,replaceInString:Rd,getExtensionFromFilename:Pa,getFilenameWithoutExtension:qb,guesstimateMimeType:Nc,getFileFromBlob:Sa,getFilenameFromURL:Oa,createRoute:H,createWorker:Sd,createView:G,createItemAPI:pa,loadImage:Td,copyFile:Vd,renameFile:Ud,createBlob:Ta,applyFilterChain:wa,text:Eb,getNumericAspectRatioFromString:Ca},views:{fileActionButton:Ib}});b=c.options,Object.assign(Aa,b)}},Yd=(Yb=q()&&!("[object OperaMini]"===Object.prototype.toString.call(window.operamini))&&"visibilityState"in document&&"Promise"in window&&"slice"in Blob.prototype&&"URL"in window&&"createObjectURL"in window.URL&&"performance"in window,function(){return Yb}),Zd={apps:[]},$d=function(){};if(a.Status={},a.FileStatus={},a.FileOrigin={},a.OptionTypes={},a.create=$d,a.destroy=$d,a.parse=$d,a.find=$d,a.registerPlugin=$d,a.getOptions=$d,a.setOptions=$d,Yd()){!function(a,b){var c=arguments.length>2&&void 0!==arguments[2]?arguments[2]:60,d="__framePainter";if(window[d])return window[d].readers.push(a),void window[d].writers.push(b);window[d]={readers:[a],writers:[b]};var e=window[d],f=1e3/c,g=null,h=null,i=null,j=null,k=function(){document.hidden?(i=function(){return window.setTimeout(function(){return l(performance.now())},f)},j=function(){return window.clearTimeout(h)}):(i=function(){return window.requestAnimationFrame(l)},j=function(){return window.cancelAnimationFrame(h)})};document.addEventListener("visibilitychange",function(){j&&j(),k(),l(performance.now())});var l=function m(a){h=i(m),g||(g=a);var b=a-g;b<=f||(g=a-b%f,e.readers.forEach(function(a){return a()}),e.writers.forEach(function(b){return b(a)}))};k(),l(performance.now())}(function(){Zd.apps.forEach(function(a){return a._read()})},function(a){Zd.apps.forEach(function(b){return b._write(a)})});var _d=function be(){document.dispatchEvent(new CustomEvent("FilePond:loaded",{detail:{supported:Yd,create:a.create,destroy:a.destroy,parse:a.parse,find:a.find,registerPlugin:a.registerPlugin,setOptions:a.setOptions}})),document.removeEventListener("DOMContentLoaded",be)};"loading"!==document.readyState?setTimeout(function(){return _d()},0):document.addEventListener("DOMContentLoaded",_d);var ae=function(){return h(za(),function(b,c){a.OptionTypes[b]=c[1]})};a.Status=Object.assign({},Ea),a.FileOrigin=Object.assign({},ra),a.FileStatus=Object.assign({},qa),a.OptionTypes={},ae(),a.create=function(){var b=Od.apply(void 0,arguments);return b.on("destroy",a.destroy),Zd.apps.push(b),Qd(b)},a.destroy=function(a){var b=Zd.apps.findIndex(function(b){return b.isAttachedTo(a)});return b>=0&&(Zd.apps.splice(b,1)[0].restoreElement(),!0)},a.parse=function(b){return Array.from(b.querySelectorAll(".filepond")).filter(function(a){return!Zd.apps.find(function(b){return b.isAttachedTo(a)})}).map(function(b){return a.create(b)})},a.find=function(a){var b=Zd.apps.find(function(b){return b.isAttachedTo(a)});return b?Qd(b):null},a.registerPlugin=function(){for(var a=arguments.length,b=new Array(a),c=0;c<a;c++)b[c]=arguments[c];b.forEach(Xd),ae()},a.getOptions=function(){var a={};return h(za(),function(b,c){a[b]=c[0]}),a},a.setOptions=function(b){return Z(b)&&(Zd.apps.forEach(function(a){a.setOptions(b)}),function(a){h(a,function(a,b){Aa[a]&&(Aa[a][0]=aa(b,Aa[a][0],Aa[a][1]))})}(b)),a.getOptions()}}a.supported=Yd,Object.defineProperty(a,"__esModule",{value:!0})});